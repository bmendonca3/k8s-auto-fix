apiVersion: v1
kind: ConfigMap
metadata:
  name: RELEASE-NAME-sumologic-otelcol
  labels:
    app: RELEASE-NAME-sumologic-fluentd-metrics
    chart: sumologic-%CURRENT_CHART_VERSION%
    release: RELEASE-NAME
    heritage: Helm
data:
  traces.otelcol.conf.yaml: "\nexporters:\n  otlphttp:\n    compression: gzip\n  \
    \  traces_endpoint: ${SUMO_ENDPOINT_DEFAULT_TRACES_SOURCE}\n  zipkin:\n    endpoint:\
    \ ${SUMO_ENDPOINT_DEFAULT_TRACES_SOURCE}\nextensions:\n  health_check: {}\nprocessors:\n\
    \  batch:\n    send_batch_max_size: 512\n    send_batch_size: 256\n    timeout:\
    \ 5s\n  cascading_filter:\n    decision_wait: 30s\n    expected_new_traces_per_sec:\
    \ 100\n    num_traces: 90000\n    policies:\n    - name: extended-duration\n \
    \     properties:\n        min_duration: 5s\n      spans_per_second: 500\n   \
    \ - name: everything-else\n      spans_per_second: -1\n    probabilistic_filtering_ratio:\
    \ 0.2\n    spans_per_second: 1660\n  k8s_tagger:\n    extract:\n      annotations:\n\
    \      - key: '*'\n        tag_name: k8s.pod.annotation.%s\n      labels:\n  \
    \    - key: '*'\n        tag_name: k8s.pod.label.%s\n      metadata:\n      -\
    \ containerId\n      - containerName\n      - clusterName\n      - daemonSetName\n\
    \      - deploymentName\n      - hostName\n      - namespace\n      - nodeName\n\
    \      - podId\n      - podName\n      - replicaSetName\n      - serviceName\n\
    \      - statefulSetName\n      namespace_labels:\n      - key: '*'\n        tag_name:\
    \ k8s.namespace.label.%s\n    owner_lookup_enabled: true\n    passthrough: false\n\
    \  memory_limiter:\n    check_interval: 5s\n    limit_mib: 1900\n  resource:\n\
    \    attributes:\n    - action: upsert\n      key: k8s.cluster.name\n      value:\
    \ kubernetes\n  source:\n    annotation_prefix: k8s.pod.annotation.\n    collector:\
    \ \"kubernetes\"\n    container_key: k8s.container.name\n    exclude_container_regex:\
    \ \"\"\n    exclude_host_regex: \"\"\n    exclude_namespace_regex: \"sumologic|foo\"\
    \n    exclude_pod_regex: \"\"\n    namespace_key: k8s.namespace.name\n    pod_key:\
    \ k8s.pod.name\n    pod_name_key: k8s.pod.pod_name\n    pod_template_hash_key:\
    \ k8s.pod.label.pod-template-hash\n    source_category: \"%{namespace}/%{pod_name}\"\
    \n    source_category_prefix: \"kubernetes/\"\n    source_category_replace_dash:\
    \ \"/\"\n    source_host_key: k8s.pod.hostname\n    source_name: \"%{namespace}.%{pod}.%{container}\"\
    \nreceivers:\n  jaeger:\n    protocols:\n      grpc:\n        endpoint: 0.0.0.0:14250\n\
    \      thrift_binary:\n        endpoint: 0.0.0.0:6832\n      thrift_compact:\n\
    \        endpoint: 0.0.0.0:6831\n      thrift_http:\n        endpoint: 0.0.0.0:14268\n\
    \  opencensus:\n    endpoint: 0.0.0.0:55678\n  otlp:\n    protocols:\n      grpc:\n\
    \        endpoint: 0.0.0.0:4317\n      http:\n        endpoint: 0.0.0.0:55681\n\
    \  zipkin:\n    endpoint: 0.0.0.0:9411\nservice:\n  extensions:\n  - health_check\n\
    \  pipelines:\n    traces:\n      exporters:\n      - otlphttp\n      processors:\n\
    \      - memory_limiter\n      - k8s_tagger\n      - source\n      - resource\n\
    \      - batch\n      receivers:\n      - jaeger\n      - opencensus\n      -\
    \ otlp\n      - zipkin"
