apiVersion: v1
kind: ConfigMap
metadata:
  name: vald-meta-gateway-config
  labels:
    app.kubernetes.io/name: vald
    helm.sh/chart: vald-v1.0.4
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/instance: RELEASE-NAME
    app.kubernetes.io/version: v1.0.4
    app.kubernetes.io/component: gateway-meta
data:
  config.yaml: "---\nversion: v0.0.0\ntime_zone: UTC\nlogging:\n  format: raw\n  level:\
    \ debug\n  logger: glg\nserver_config:\n  servers:\n    - name: grpc\n      host:\
    \ 0.0.0.0\n      port: 8081\n      grpc:\n        bidirectional_stream_concurrency:\
    \ 20\n        connection_timeout: \"\"\n        enable_reflection: true\n    \
    \    header_table_size: 0\n        initial_conn_window_size: 0\n        initial_window_size:\
    \ 0\n        interceptors:\n        - RecoverInterceptor\n        keepalive:\n\
    \          max_conn_age: \"\"\n          max_conn_age_grace: \"\"\n          max_conn_idle:\
    \ \"\"\n          time: \"\"\n          timeout: \"\"\n        max_header_list_size:\
    \ 0\n        max_receive_message_size: 0\n        max_send_message_size: 0\n \
    \       read_buffer_size: 0\n        write_buffer_size: 0\n      mode: GRPC\n\
    \      network: tcp\n      probe_wait_time: 3s\n      restart: true\n      socket_option:\n\
    \        ip_recover_destination_addr: false\n        ip_transparent: false\n \
    \       reuse_addr: true\n        reuse_port: true\n        tcp_cork: false\n\
    \        tcp_defer_accept: true\n        tcp_fast_open: true\n        tcp_no_delay:\
    \ true\n        tcp_quick_ack: true\n      socket_path: \"\"\n  health_check_servers:\n\
    \    - name: liveness\n      host: 0.0.0.0\n      port: 3000\n      http:\n  \
    \      handler_timeout: \"\"\n        idle_timeout: \"\"\n        read_header_timeout:\
    \ \"\"\n        read_timeout: \"\"\n        shutdown_duration: 5s\n        write_timeout:\
    \ \"\"\n      mode: \"\"\n      network: tcp\n      probe_wait_time: 3s\n    \
    \  socket_option:\n        ip_recover_destination_addr: false\n        ip_transparent:\
    \ false\n        reuse_addr: true\n        reuse_port: true\n        tcp_cork:\
    \ false\n        tcp_defer_accept: true\n        tcp_fast_open: true\n       \
    \ tcp_no_delay: true\n        tcp_quick_ack: true\n      socket_path: \"\"\n \
    \   - name: readiness\n      host: 0.0.0.0\n      port: 3001\n      http:\n  \
    \      handler_timeout: \"\"\n        idle_timeout: \"\"\n        read_header_timeout:\
    \ \"\"\n        read_timeout: \"\"\n        shutdown_duration: 0s\n        write_timeout:\
    \ \"\"\n      mode: \"\"\n      network: tcp\n      probe_wait_time: 3s\n    \
    \  socket_option:\n        ip_recover_destination_addr: false\n        ip_transparent:\
    \ false\n        reuse_addr: true\n        reuse_port: true\n        tcp_cork:\
    \ false\n        tcp_defer_accept: true\n        tcp_fast_open: true\n       \
    \ tcp_no_delay: true\n        tcp_quick_ack: true\n      socket_path: \"\"\n \
    \ metrics_servers:\n    - name: pprof\n      host: 0.0.0.0\n      port: 6060\n\
    \      http:\n        handler_timeout: 5s\n        idle_timeout: 2s\n        read_header_timeout:\
    \ 1s\n        read_timeout: 1s\n        shutdown_duration: 5s\n        write_timeout:\
    \ 1s\n      mode: REST\n      network: tcp\n      probe_wait_time: 3s\n      socket_option:\n\
    \        ip_recover_destination_addr: false\n        ip_transparent: false\n \
    \       reuse_addr: true\n        reuse_port: true\n        tcp_cork: false\n\
    \        tcp_defer_accept: true\n        tcp_fast_open: true\n        tcp_no_delay:\
    \ true\n        tcp_quick_ack: true\n      socket_path: \"\"\n  startup_strategy:\n\
    \    - liveness\n    - pprof\n    - grpc\n    - readiness\n  full_shutdown_duration:\
    \ 600s\n  tls:\n    ca: /path/to/ca\n    cert: /path/to/cert\n    enabled: false\n\
    \    insecure_skip_verify: false\n    key: /path/to/key\nobservability:\n  enabled:\
    \ false\n  collector:\n    duration: 5s\n    metrics:\n      enable_cgo: true\n\
    \      enable_goroutine: true\n      enable_memory: true\n      enable_version_info:\
    \ true\n      version_info_labels:\n      - vald_version\n      - server_name\n\
    \      - git_commit\n      - build_time\n      - go_version\n      - go_os\n \
    \     - go_arch\n      - ngt_version\n  trace:\n    enabled: false\n    sampling_rate:\
    \ 1\n  prometheus:\n    enabled: false\n    endpoint: /metrics\n    namespace:\
    \ vald\n  jaeger:\n    enabled: false\n    collector_endpoint: \"\"\n    agent_endpoint:\
    \ \"jaeger-agent.default.svc.cluster.local:6831\"\n    username: \"\"\n    password:\
    \ \"\"\n    service_name: \"vald-meta-gateway\"\n    buffer_max_count: 10\n  stackdriver:\n\
    \    project_id: \"\"\n    client:\n      api_key: \"\"\n      audiences: []\n\
    \      authentication_enabled: true\n      credentials_file: \"\"\n      credentials_json:\
    \ \"\"\n      endpoint: \"\"\n      quota_project: \"\"\n      request_reason:\
    \ \"\"\n      scopes: []\n      telemetry_enabled: true\n      user_agent: \"\"\
    \n    exporter:\n      bundle_count_threshold: 0\n      bundle_delay_threshold:\
    \ \"0\"\n      location: \"\"\n      metric_prefix: vald.vdaas.org\n      monitoring_enabled:\
    \ false\n      number_of_workers: 1\n      reporting_interval: 1m\n      skip_cmd:\
    \ false\n      timeout: 5s\n      trace_spans_buffer_max_bytes: 0\n      tracing_enabled:\
    \ false\n    profiler:\n      enabled: false\n      service: \"vald-meta-gateway\"\
    \n      service_version: \"\"\n      debug_logging: false\n      mutex_profiling:\
    \ true\n      cpu_profiling: true\n      alloc_profiling: true\n      heap_profiling:\
    \ true\n      goroutine_profiling: true\n      alloc_force_gc: false\n      api_addr:\
    \ \"\"\n      instance: \"\"\n      zone: \"\"\nclient:\n  addrs:\n    - vald-backup-gateway.default.svc.cluster.local:8081\n\
    \  health_check_duration: \"1s\"\n  connection_pool:\n    enable_dns_resolver:\
    \ true\n    enable_rebalance: true\n    old_conn_close_duration: 3s\n    rebalance_duration:\
    \ 30m\n    size: 3\n  backoff:\n    backoff_factor: 1.1\n    backoff_time_limit:\
    \ 5s\n    enable_error_log: true\n    initial_duration: 5ms\n    jitter_limit:\
    \ 100ms\n    maximum_duration: 5s\n    retry_count: 100\n  call_option:\n    max_recv_msg_size:\
    \ 0\n    max_retry_rpc_buffer_size: 0\n    max_send_msg_size: 0\n    wait_for_ready:\
    \ true\n  dial_option:\n    backoff_base_delay: 1s\n    backoff_jitter: 0.2\n\
    \    backoff_max_delay: 120s\n    backoff_multiplier: 1.6\n    enable_backoff:\
    \ false\n    initial_connection_window_size: 0\n    initial_window_size: 0\n \
    \   insecure: true\n    keep_alive:\n      permit_without_stream: false\n    \
    \  time: \"\"\n      timeout: \"\"\n    max_msg_size: 0\n    min_connection_timeout:\
    \ 20s\n    net:\n      dialer:\n        dual_stack_enabled: true\n        keep_alive:\
    \ \"\"\n        timeout: \"\"\n      dns:\n        cache_enabled: true\n     \
    \   cache_expiration: 1h\n        refresh_duration: 30m\n      socket_option:\n\
    \        ip_recover_destination_addr: false\n        ip_transparent: false\n \
    \       reuse_addr: true\n        reuse_port: true\n        tcp_cork: false\n\
    \        tcp_defer_accept: true\n        tcp_fast_open: true\n        tcp_no_delay:\
    \ true\n        tcp_quick_ack: true\n      tls:\n        ca: /path/to/ca\n   \
    \     cert: /path/to/cert\n        enabled: false\n        insecure_skip_verify:\
    \ false\n        key: /path/to/key\n    read_buffer_size: 0\n    timeout: \"\"\
    \n    write_buffer_size: 0\n  tls:\n    ca: /path/to/ca\n    cert: /path/to/cert\n\
    \    enabled: false\n    insecure_skip_verify: false\n    key: /path/to/key\n\
    meta:\n  client:\n    addrs:\n      - vald-meta.default.svc.cluster.local:8081\n\
    \    health_check_duration: \"1s\"\n    connection_pool:\n      enable_dns_resolver:\
    \ true\n      enable_rebalance: true\n      old_conn_close_duration: 3s\n    \
    \  rebalance_duration: 30m\n      size: 3\n    backoff:\n      backoff_factor:\
    \ 1.1\n      backoff_time_limit: 5s\n      enable_error_log: true\n      initial_duration:\
    \ 5ms\n      jitter_limit: 100ms\n      maximum_duration: 5s\n      retry_count:\
    \ 100\n    call_option:\n      max_recv_msg_size: 0\n      max_retry_rpc_buffer_size:\
    \ 0\n      max_send_msg_size: 0\n      wait_for_ready: true\n    dial_option:\n\
    \      backoff_base_delay: 1s\n      backoff_jitter: 0.2\n      backoff_max_delay:\
    \ 120s\n      backoff_multiplier: 1.6\n      enable_backoff: false\n      initial_connection_window_size:\
    \ 0\n      initial_window_size: 0\n      insecure: true\n      keep_alive:\n \
    \       permit_without_stream: false\n        time: \"\"\n        timeout: \"\"\
    \n      max_msg_size: 0\n      min_connection_timeout: 20s\n      net:\n     \
    \   dialer:\n          dual_stack_enabled: true\n          keep_alive: \"\"\n\
    \          timeout: \"\"\n        dns:\n          cache_enabled: true\n      \
    \    cache_expiration: 1h\n          refresh_duration: 30m\n        socket_option:\n\
    \          ip_recover_destination_addr: false\n          ip_transparent: false\n\
    \          reuse_addr: true\n          reuse_port: true\n          tcp_cork: false\n\
    \          tcp_defer_accept: true\n          tcp_fast_open: true\n          tcp_no_delay:\
    \ true\n          tcp_quick_ack: true\n        tls:\n          ca: /path/to/ca\n\
    \          cert: /path/to/cert\n          enabled: false\n          insecure_skip_verify:\
    \ false\n          key: /path/to/key\n      read_buffer_size: 0\n      timeout:\
    \ \"\"\n      write_buffer_size: 0\n    tls:\n      ca: /path/to/ca\n      cert:\
    \ /path/to/cert\n      enabled: false\n      insecure_skip_verify: false\n   \
    \   key: /path/to/key\n  enable_cache: true\n  cache_expiration: 30m\n  expired_cache_check_duration:\
    \ 3m"
