apiVersion: apps/v1
kind: Deployment
metadata:
  name: gcsb-run
  namespace: gcsb
spec:
  replicas: 1
  selector:
    matchLabels:
      app: gcsb-run
  template:
    metadata:
      labels:
        app: gcsb-run
    spec:
      serviceAccountName: gcsb
      containers:
      - name: gcsb-run
        image: gcr.io/<project>/gcsb:latest
        command:
        - /gcsb
        - run
        args:
        - --project=YOUR_PROJECT_ID
        - --instance=YOUR_INSTANCE_ID
        - --database=YOUR_DATABASE
        - --table=YOUR_TABLE
        - --operations=1000000
        - --threads=10
        - --reads=50
        - --writes=50
        - --sample-size=5
        resources:
          requests:
            cpu: '6'
            memory: 4Gi
          limits:
            cpu: '6'
            memory: 4Gi
