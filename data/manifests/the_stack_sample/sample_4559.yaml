apiVersion: apps/v1
kind: Deployment
metadata:
  name: server-gigya-<company-name>
  namespace: prod
  labels:
    app: server-gigya
    appId: <company-name>
spec:
  selector:
    matchLabels:
      app: server-gigya
      appId: <company-name>
  template:
    metadata:
      labels:
        app: server-gigya
        appId: <company-name>
    spec:
      containers:
      - name: server-gigya
        image: server-gigya:latest
        ports:
        - containerPort: 5002
        env:
        - name: OWNID__CALLBACK_URL
          value: https://<company-name>.ownid.com
        - name: OWNID__DID
          value: did:<company-name>:<did>
        - name: OWNID__NAME
          value: <Company name>
        - name: OWNID__DESCRIPTION
          value: <Company description>
        - name: OWNID__ICON
          value: <Company icon base64>
        - name: OWNID__CACHE_TYPE
          value: redis
        - name: OWNID__CACHE_CONFIG
          value: <redis uri>
        - name: OWNID__PUB_KEY
          value: <website public key>
        - name: OWNID__PRIVATE_KEY
          value: <website private key>
        - name: OWNID__AUTHENTICATION_MODE
          value: All
        - name: OWNID__FIDO2_PASSWORDLESS_PAGE_URL
          value: https://passwordless.<website domain>
        - name: OWNID__TOP_DOMAIN
          value: <company-domain>
        - name: OWNID__MAGIC_LINK__ENABLED
          value: 'true'
        - name: OWNID__MAGIC_LINK__REDIRECT_URL
          value: https://my-comany.com/login
        - name: GIGYA__DATA_CENTER
          value: us1.gigya.com
        - name: GIGYA__SECRET
          value: <gigya secret>
        - name: GIGYA__API_KEY
          value: <gigya api key>
        - name: GIGYA__USER_KEY
          value: <gigya user key>
        - name: Metrics__Enable
          value: 'true'
        - name: Metrics__Namespace
          value: <namespace>
        - name: AWS__Region
          value: <region>
        - name: AWS__AccessKeyId
          value: <access key id>
        - name: AWS__SecretAccessKey
          value: <secret access key>
        - name: SMTP__HOST
          value: <smtp.my-company.com>
        - name: SMTP__USER_NAME
          value: <user name>
        - name: SMTP__PASSWORD
          value: <password>
        - name: SMTP__SSL
          value: 'false'
        - name: SMTP__FROM_ADDRESS
          value: no-reply@my-company.com
        - name: SMTP__FROM_NAME
          value: Magic Link - My Company
