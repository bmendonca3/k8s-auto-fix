apiVersion: v1
kind: ConfigMap
metadata:
  namespace: monitoring
  name: loki-grafana-dashboard
  labels:
    grafana_dashboard: '1'
data:
  loki-grafana-dashboard.json: "{\n  \"annotations\": {\n    \"list\": [\n      {\n\
    \        \"builtIn\": 1,\n        \"datasource\": \"-- Grafana --\",\n       \
    \ \"enable\": true,\n        \"hide\": true,\n        \"iconColor\": \"rgba(0,\
    \ 211, 255, 1)\",\n        \"name\": \"Annotations & Alerts\",\n        \"type\"\
    : \"dashboard\"\n      }\n    ]\n  },\n  \"description\": \"Loki logs panel with\
    \ prometheus variables \",\n  \"editable\": true,\n  \"gnetId\": 12019,\n  \"\
    graphTooltip\": 0,\n  \"id\": 36,\n  \"iteration\": 1591945289159,\n  \"links\"\
    : [],\n  \"panels\": [\n    {\n      \"aliasColors\": {},\n      \"bars\": true,\n\
    \      \"dashLength\": 10,\n      \"dashes\": false,\n      \"datasource\": \"\
    lokiPromQL\",\n      \"fill\": 1,\n      \"fillGradient\": 0,\n      \"gridPos\"\
    : {\n        \"h\": 3,\n        \"w\": 24,\n        \"x\": 0,\n        \"y\":\
    \ 0\n      },\n      \"hiddenSeries\": false,\n      \"id\": 6,\n      \"legend\"\
    : {\n        \"avg\": false,\n        \"current\": false,\n        \"max\": false,\n\
    \        \"min\": false,\n        \"show\": false,\n        \"total\": false,\n\
    \        \"values\": false\n      },\n      \"lines\": false,\n      \"linewidth\"\
    : 1,\n      \"nullPointMode\": \"null\",\n      \"options\": {\n        \"dataLinks\"\
    : []\n      },\n      \"percentage\": false,\n      \"pointradius\": 2,\n    \
    \  \"points\": false,\n      \"renderer\": \"flot\",\n      \"seriesOverrides\"\
    : [],\n      \"spaceLength\": 10,\n      \"stack\": false,\n      \"steppedLine\"\
    : false,\n      \"targets\": [\n        {\n          \"expr\": \"sum(count_over_time({namespace=\\\
    \"$namespace\\\", instance=~\\\"$pod\\\"} |~ \\\"$search\\\"[$__interval]))\"\
    ,\n          \"refId\": \"A\"\n        }\n      ],\n      \"thresholds\": [],\n\
    \      \"timeFrom\": null,\n      \"timeRegions\": [],\n      \"timeShift\": null,\n\
    \      \"title\": \"\",\n      \"tooltip\": {\n        \"shared\": true,\n   \
    \     \"sort\": 0,\n        \"value_type\": \"individual\"\n      },\n      \"\
    type\": \"graph\",\n      \"xaxis\": {\n        \"buckets\": null,\n        \"\
    mode\": \"time\",\n        \"name\": null,\n        \"show\": true,\n        \"\
    values\": []\n      },\n      \"yaxes\": [\n        {\n          \"format\": \"\
    short\",\n          \"label\": null,\n          \"logBase\": 1,\n          \"\
    max\": null,\n          \"min\": null,\n          \"show\": false\n        },\n\
    \        {\n          \"format\": \"short\",\n          \"label\": null,\n   \
    \       \"logBase\": 1,\n          \"max\": null,\n          \"min\": null,\n\
    \          \"show\": false\n        }\n      ],\n      \"yaxis\": {\n        \"\
    align\": false,\n        \"alignLevel\": null\n      }\n    },\n    {\n      \"\
    datasource\": \"loki\",\n      \"gridPos\": {\n        \"h\": 25,\n        \"\
    w\": 24,\n        \"x\": 0,\n        \"y\": 3\n      },\n      \"id\": 2,\n  \
    \    \"maxDataPoints\": \"\",\n      \"options\": {\n        \"showLabels\": false,\n\
    \        \"showTime\": true,\n        \"sortOrder\": \"Descending\",\n       \
    \ \"wrapLogMessage\": true\n      },\n      \"targets\": [\n        {\n      \
    \    \"expr\": \"{namespace=\\\"$namespace\\\", instance=~\\\"$pod\\\"} |~ \\\"\
    $search\\\"\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"timeFrom\"\
    : null,\n      \"timeShift\": null,\n      \"title\": \"Logs Panel\",\n      \"\
    type\": \"logs\"\n    },\n    {\n      \"content\": \"<div style=\\\"text-align:center\\\
    \"> For Grafana Loki blog example </div>\\n\\n\\n\",\n      \"datasource\": null,\n\
    \      \"gridPos\": {\n        \"h\": 3,\n        \"w\": 24,\n        \"x\": 0,\n\
    \        \"y\": 28\n      },\n      \"id\": 4,\n      \"mode\": \"html\",\n  \
    \    \"options\": {},\n      \"timeFrom\": null,\n      \"timeShift\": null,\n\
    \      \"title\": \"\",\n      \"transparent\": true,\n      \"type\": \"text\"\
    \n    }\n  ],\n  \"schemaVersion\": 21,\n  \"style\": \"dark\",\n  \"tags\": [],\n\
    \  \"templating\": {\n    \"list\": [\n      {\n        \"allValue\": null,\n\
    \        \"current\": {\n          \"text\": \"infrastructure\",\n          \"\
    value\": \"infrastructure\"\n        },\n        \"datasource\": \"Prometheus\"\
    ,\n        \"definition\": \"label_values(kube_pod_info, namespace)\",\n     \
    \   \"hide\": 0,\n        \"includeAll\": false,\n        \"index\": -1,\n   \
    \     \"label\": null,\n        \"multi\": false,\n        \"name\": \"namespace\"\
    ,\n        \"options\": [],\n        \"query\": \"label_values(kube_pod_info,\
    \ namespace)\",\n        \"refresh\": 1,\n        \"regex\": \"\",\n        \"\
    skipUrlSync\": false,\n        \"sort\": 0,\n        \"tagValuesQuery\": \"\"\
    ,\n        \"tags\": [],\n        \"tagsQuery\": \"\",\n        \"type\": \"query\"\
    ,\n        \"useTags\": false\n      },\n      {\n        \"allValue\": \".*\"\
    ,\n        \"current\": {\n          \"selected\": false,\n          \"text\"\
    : \"All\",\n          \"value\": \"$__all\"\n        },\n        \"datasource\"\
    : \"Prometheus\",\n        \"definition\": \"label_values(container_network_receive_bytes_total{namespace=~\\\
    \"$namespace\\\"},pod)\",\n        \"hide\": 0,\n        \"includeAll\": true,\n\
    \        \"index\": -1,\n        \"label\": null,\n        \"multi\": true,\n\
    \        \"name\": \"pod\",\n        \"options\": [],\n        \"query\": \"label_values(container_network_receive_bytes_total{namespace=~\\\
    \"$namespace\\\"},pod)\",\n        \"refresh\": 1,\n        \"regex\": \"\",\n\
    \        \"skipUrlSync\": false,\n        \"sort\": 0,\n        \"tagValuesQuery\"\
    : \"\",\n        \"tags\": [],\n        \"tagsQuery\": \"\",\n        \"type\"\
    : \"query\",\n        \"useTags\": false\n      },\n      {\n        \"allValue\"\
    : \".*\",\n        \"current\": {\n          \"selected\": false,\n          \"\
    text\": \"All\",\n          \"value\": \"$__all\"\n        },\n        \"datasource\"\
    : \"Prometheus\",\n        \"definition\": \"label_values(kube_service_info {namespace=~\\\
    \"$namespace\\\"},service)\",\n        \"hide\": 0,\n        \"includeAll\": true,\n\
    \        \"index\": -1,\n        \"label\": null,\n        \"multi\": true,\n\
    \        \"name\": \"service\",\n        \"options\": [],\n        \"query\":\
    \ \"label_values(kube_service_info {namespace=~\\\"$namespace\\\"},service)\"\
    ,\n        \"refresh\": 1,\n        \"regex\": \"\",\n        \"skipUrlSync\"\
    : false,\n        \"sort\": 0,\n        \"tagValuesQuery\": \"\",\n        \"\
    tags\": [],\n        \"tagsQuery\": \"\",\n        \"type\": \"query\",\n    \
    \    \"useTags\": false\n      },\n      {\n        \"current\": {\n         \
    \ \"selected\": false,\n          \"text\": \"\",\n          \"value\": \"\"\n\
    \        },\n        \"hide\": 0,\n        \"label\": null,\n        \"name\"\
    : \"search\",\n        \"options\": [\n          {\n            \"selected\":\
    \ false,\n            \"text\": \"\",\n            \"value\": \"\"\n         \
    \ }\n        ],\n        \"query\": \"\",\n        \"skipUrlSync\": false,\n \
    \       \"type\": \"textbox\"\n      }\n    ]\n  },\n  \"time\": {\n    \"from\"\
    : \"now-30m\",\n    \"to\": \"now\"\n  },\n  \"timepicker\": {\n    \"refresh_intervals\"\
    : [\n      \"5s\",\n      \"10s\",\n      \"30s\",\n      \"1m\",\n      \"5m\"\
    ,\n      \"15m\",\n      \"30m\",\n      \"1h\",\n      \"2h\",\n      \"1d\"\n\
    \    ]\n  },\n  \"timezone\": \"\",\n  \"title\": \"Loki Dashboard quick search\"\
    ,\n  \"uid\": \"liz0yRCZz\",\n  \"version\": 9\n}"
