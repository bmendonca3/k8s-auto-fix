apiVersion: v1
kind: ConfigMap
metadata:
  name: cota-wordpress-nginx
  namespace: oshk
data:
  default.conf: "server {\n    listen       80;\n    server_name  localhost;\n\n \
    \   #charset koi8-r;\n    #access_log  /var/log/nginx/host.access.log  main;\n\
    \n    root   /var/www/html;\n    index index.php index.html index.htm;\n\n   \
    \ location / {\n        try_files $uri $uri/ /index.php?q=$uri&$args;\n      \
    \  rewrite ^/wp-content/uploads/(.*)$ https://hkcota.blob.core.windows.net/wp-upload/$1\
    \ permanent;\n    }\n\n    #error_page  404              /404.html;\n\n    # redirect\
    \ server error pages to the static page /50x.html\n    #\n    #error_page   500\
    \ 502 503 504  /50x.html;\n    #location = /50x.html {\n    #    root   /usr/share/nginx/html;\n\
    \    #}\n\n    # proxy the PHP scripts to Apache listening on 127.0.0.1:80\n \
    \   #\n    #location ~ \\.php$ {\n    #    proxy_pass   http://127.0.0.1;\n  \
    \  #}\n\n    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n\
    \    #\n    location ~ \\.php$ {\n        try_files $uri =404;\n        fastcgi_split_path_info\
    \ ^(.+\\.php)(/.+)$;\n        fastcgi_pass   localhost:9000;\n        fastcgi_index\
    \  index.php;\n        include        fastcgi_params;\n        fastcgi_param SCRIPT_FILENAME\
    \ $document_root/$fastcgi_script_name;\n        fastcgi_param HTTPS on;\n    }\n\
    \n    location ~* \\.(jpg|jpeg|gif|png|css|js|ico|xml)$ {\n      access_log  \
    \      off;\n      log_not_found     off;\n      expires           360d;\n   \
    \ }\n\n    # deny access to hideen files\n    #\n    location ~ /\\. {\n     \
    \ access_log off;\n      log_not_found off;\n      deny  all;\n    }\n}\n"
  nginx.conf: "user  root;\nworker_processes  1;\nerror_log  /dev/stderr warn;\npid\
    \        /var/run/nginx.pid;\n\nevents {\n  worker_connections  1024;\n}\n\nhttp\
    \ {\n  include       /etc/nginx/mime.types;\n  default_type  application/octet-stream;\n\
    \  log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n\
    \                    '$status $body_bytes_sent \"$http_referer\" '\n         \
    \           '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n  access_log  /dev/stdout\
    \  main;\n\n  sendfile        on;\n  #tcp_nopush     on;\n\n  keepalive_timeout\
    \  65;\n  #gzip  on;\n  include /etc/nginx/conf.d/*.conf;\n}"
