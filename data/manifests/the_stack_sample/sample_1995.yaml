apiVersion: v1
kind: ConfigMap
metadata:
  name: nginx-config
  namespace: meajudafi
data:
  nginx.prod.conf: "worker_processes  5;  ## Default: 1\n\nevents {\n   worker_connections\
    \  4096;  ## Default: 1024\n}\n\nhttp {\n    proxy_cache_path /tmp keys_zone=mycache:10m\
    \ max_size=1g inactive=3d use_temp_path=off;\n\n    server {\n        listen 80;\n\
    \        listen [::]:80;    \n\n        location /progress {                \n\
    \            expires -1;\n            proxy_set_header        Host $host;\n  \
    \          proxy_set_header        X-Real-IP $remote_addr;\n            proxy_set_header\
    \        X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header\
    \        X-Forwarded-Proto $scheme;                \n\n            proxy_pass\
    \          http://localhost:3000;\n            proxy_read_timeout  90;\n     \
    \   }        \n\n        location / {\n            proxy_cache             mycache;\n\
    \            proxy_cache_valid       any 1h;\n            expires 30m;\n     \
    \       proxy_set_header        Host $host;\n            proxy_set_header    \
    \    X-Real-IP $remote_addr;\n            proxy_set_header        X-Forwarded-For\
    \ $proxy_add_x_forwarded_for;\n            proxy_set_header        X-Forwarded-Proto\
    \ $scheme;\n            add_header              X-Proxy-Cache $upstream_cache_status;\n\
    \n            proxy_pass          http://localhost:3000;\n            proxy_read_timeout\
    \  90;\n        }\n    }\n}\n"
  nginx.dev.conf: "worker_processes  1;\n\nevents {\n   worker_connections  1025;\n\
    }\n\nhttp {                \n\n    server {\n        listen 80;\n        listen\
    \ [::]:80;            \n\n        location /progress {                \n     \
    \       expires -1;\n            proxy_set_header        Host $host;\n       \
    \     proxy_set_header        X-Real-IP $remote_addr;\n            proxy_set_header\
    \        X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header\
    \        X-Forwarded-Proto $scheme;                \n\n            proxy_pass\
    \          http://localhost:3000;\n            proxy_read_timeout  90;\n     \
    \   }\n\n        location / {                \n            proxy_set_header  \
    \      Host $host;\n            proxy_set_header        X-Real-IP $remote_addr;\n\
    \            proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;\n\
    \            proxy_set_header        X-Forwarded-Proto $scheme;              \
    \  \n\n            proxy_pass          http://localhost:3000;\n            proxy_read_timeout\
    \  90;\n        }\n    }\n}"
