apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    duck.knative.dev/source: 'true'
    events.cloud.google.com/release: devel
    events.cloud.google.com/crd-install: 'true'
  annotations:
    registry.knative.dev/eventTypes: "[\n  {\"type\": \"google.cloud.audit.log.v1.written\"\
      , \"schema\": \"https://raw.githubusercontent.com/googleapis/google-cloudevents/master/proto/google/events/cloud/audit/v1/data.proto\"\
      , \"description\": \"Common audit log event type for all Google Cloud Platform\
      \ API operations.\" }\n]\n"
  name: cloudauditlogssources.events.cloud.google.com
spec:
  group: events.cloud.google.com
  names:
    categories:
    - all
    - knative
    - cloudauditlogssource
    - sources
    kind: CloudAuditLogsSource
    plural: cloudauditlogssources
  scope: Namespaced
  preserveUnknownFields: false
  conversion:
    strategy: Webhook
    webhook:
      conversionReviewVersions:
      - v1
      - v1beta1
      clientConfig:
        service:
          name: webhook
          namespace: events-system
  versions:
  - name: v1
    served: true
    storage: true
    subresources: &id001
      status: {}
    additionalPrinterColumns: &id002
    - name: Ready
      type: string
      jsonPath: .status.conditions[?(@.type=="Ready")].status
    - name: Reason
      type: string
      jsonPath: .status.conditions[?(@.type=="Ready")].reason
    - name: Age
      type: date
      jsonPath: .metadata.creationTimestamp
    schema:
      openAPIV3Schema:
        type: object
        properties:
          spec: &id003
            type: object
            required:
            - sink
            - serviceName
            - methodName
            properties:
              sink:
                type: object
                description: 'Sink which receives the notifications.

                  '
                properties:
                  uri:
                    type: string
                    minLength: 1
                  ref:
                    type: object
                    required:
                    - apiVersion
                    - kind
                    - name
                    properties:
                      apiVersion:
                        type: string
                        minLength: 1
                      kind:
                        type: string
                        minLength: 1
                      namespace:
                        type: string
                      name:
                        type: string
                        minLength: 1
              ceOverrides:
                type: object
                description: 'Defines overrides to control modifications of the event
                  sent to the sink.

                  '
                properties:
                  extensions:
                    type: object
                    description: 'Extensions specify what attribute are added or overridden
                      on the outbound event. Each `Extensions` key-value pair are
                      set on the event as an attribute extension independently.

                      '
                    x-kubernetes-preserve-unknown-fields: true
              serviceAccountName:
                type: string
                description: 'Kubernetes service account used to bind to a google
                  service account to poll the Cloud Pub/Sub Subscription. The value
                  of the Kubernetes service account must be a valid DNS subdomain
                  name. (see https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#dns-subdomain-names)

                  '
              secret:
                type: object
                description: 'Credential used to poll the Cloud Pub/Sub Subscription.
                  It is not used to create or delete the Subscription, only to poll
                  it. The value of the secret entry must be a service account key
                  in the JSON format (see https://cloud.google.com/iam/docs/creating-managing-service-account-keys).
                  Defaults to secret.name of ''google-cloud-key'' and secret.key of
                  ''key.json''.

                  '
                properties:
                  name:
                    type: string
                  key:
                    type: string
                  optional:
                    type: boolean
              project:
                type: string
                description: 'Google Cloud Project ID of the project into which the
                  topic should be created. If omitted uses the Project ID from the
                  GKE cluster metadata service.

                  '
              serviceName:
                type: string
              methodName:
                type: string
              resourceName:
                type: string
          status:
            type: object
            properties:
              observedGeneration: &id004
                type: integer
                format: int64
              conditions: &id005
                type: array
                items:
                  type: object
                  properties:
                    lastTransitionTime:
                      type: string
                    message:
                      type: string
                    reason:
                      type: string
                    severity:
                      type: string
                    status:
                      type: string
                    type:
                      type: string
                  required:
                  - type
                  - status
              sinkUri: &id006
                type: string
              ceAttributes: &id007
                type: array
                items:
                  type: object
                  properties:
                    type:
                      type: string
                    source:
                      type: string
              projectId: &id008
                type: string
              topicId: &id009
                type: string
              subscriptionId: &id010
                type: string
              stackdriverSink: &id011
                type: string
                description: 'ID of the Stackdriver sink used to publish audit log
                  messages.

                  '
  - name: v1beta1
    served: true
    storage: false
    subresources: *id001
    additionalPrinterColumns: *id002
    schema:
      openAPIV3Schema:
        type: object
        properties:
          spec: *id003
          status:
            type: object
            properties:
              observedGeneration: *id004
              conditions: *id005
              sinkUri: *id006
              ceAttributes: *id007
              projectId: *id008
              topicId: *id009
              subscriptionId: *id010
              stackdriverSink: *id011
              serviceAccountName:
                type: string
