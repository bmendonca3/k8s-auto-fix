apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: image-downloader
  namespace: default
spec:
  selector:
    matchLabels:
      name: image-downloader
  template:
    metadata:
      labels:
        name: image-downloader
    spec:
      nodeSelector:
        workload: 'true'
      tolerations:
      - key: workload
        value: 'true'
        operator: Equal
        effect: NoSchedule
      terminationGracePeriodSeconds: 0
      containers:
      - name: python-predictor-cpu
        image: $CORTEX_IMAGE_PYTHON_PREDICTOR_CPU
        command:
        - /bin/sh
        args:
        - -c
        - sleep 1000000
      - name: tensorflow-serving-cpu
        image: $CORTEX_IMAGE_TENSORFLOW_SERVING_CPU
        command:
        - /bin/sh
        args:
        - -c
        - sleep 1000000
      - name: tensorflow-predictor
        image: $CORTEX_IMAGE_TENSORFLOW_PREDICTOR
        command:
        - /bin/sh
        args:
        - -c
        - sleep 1000000
      - name: downloader
        image: $CORTEX_IMAGE_DOWNLOADER
        command:
        - /bin/sh
        args:
        - -c
        - sleep 1000000
