apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-config
  labels:
    app: blockchain-demo
data:
  grafana.ini: '[auth]

    disable_login_form = true

    [auth.anonymous]

    enabled = true

    org_role = Editor


    '
  datasources.yml: "apiVersion: 1\n\ndeleteDatasources:\n  - name: Postgres\n    orgId:\
    \ 1\n  - name: Prometheus\n    orgId: 1\n\ndatasources:\n  - name: Postgres\n\
    \    type: postgres\n    orgId: 1\n    url: postgres:5432\n    database: transactions_db\n\
    \    user: transactions_user\n    secureJsonData:\n      password: \"transactions_pw\"\
    \n    jsonData:\n      sslmode: \"disable\" # disable/require/verify-ca/verify-full\n\
    \      maxOpenConns: 0         \n      maxIdleConns: 2\n      connMaxLifetime:\
    \ 14400\n      postgresVersion: 1000 # 903=9.3, 904=9.4, 905=9.5, 906=9.6, 1000=10\n\
    \      timescaledb: false\n\n"
  dashboards.yml: "apiVersion: 1\nproviders:\n    - name: default\n      orgId: 1\n\
    \      folder: ''\n      type: file\n      disableDeletion: true\n      editable:\
    \ true\n      options:\n        path: /etc/grafana/dashboard.json\n\n"
  dashboard.json: "{\n  \"annotations\": {\n    \"list\": [\n      {\n        \"builtIn\"\
    : 1,\n        \"datasource\": \"-- Grafana --\",\n        \"enable\": true,\n\
    \        \"hide\": true,\n        \"iconColor\": \"rgba(0, 211, 255, 1)\",\n \
    \       \"name\": \"Annotations & Alerts\",\n        \"type\": \"dashboard\"\n\
    \      }\n    ]\n  },\n  \"editable\": true,\n  \"gnetId\": null,\n  \"graphTooltip\"\
    : 0,\n  \"id\": 1,\n  \"links\": [],\n  \"panels\": [\n    {\n      \"collapsed\"\
    : false,\n      \"datasource\": null,\n      \"gridPos\": {\n        \"h\": 1,\n\
    \        \"w\": 24,\n        \"x\": 0,\n        \"y\": 0\n      },\n      \"id\"\
    : 2,\n      \"panels\": [],\n      \"title\": \"Transaction Pool\",\n      \"\
    type\": \"row\"\n    },\n    {\n      \"datasource\": \"Postgres\",\n      \"\
    fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n          \
    \  \"mode\": \"thresholds\"\n          },\n          \"mappings\": [],\n     \
    \     \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\"\
    : [\n              {\n                \"color\": \"green\",\n                \"\
    value\": null\n              },\n              {\n                \"color\": \"\
    red\",\n                \"value\": 80\n              }\n            ]\n      \
    \    }\n        },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n\
    \        \"h\": 7,\n        \"w\": 8,\n        \"x\": 0,\n        \"y\": 1\n \
    \     },\n      \"id\": 4,\n      \"options\": {\n        \"colorMode\": \"value\"\
    ,\n        \"graphMode\": \"area\",\n        \"justifyMode\": \"auto\",\n    \
    \    \"orientation\": \"auto\",\n        \"reduceOptions\": {\n          \"calcs\"\
    : [\n            \"lastNotNull\"\n          ],\n          \"fields\": \"\",\n\
    \          \"values\": false\n        },\n        \"text\": {},\n        \"textMode\"\
    : \"auto\"\n      },\n      \"pluginVersion\": \"7.5.2\",\n      \"targets\":\
    \ [\n        {\n          \"format\": \"table\",\n          \"group\": [],\n \
    \         \"metricColumn\": \"none\",\n          \"rawQuery\": true,\n       \
    \   \"rawSql\": \"SELECT\\n  count(*)\\nFROM transactions\",\n          \"refId\"\
    : \"A\",\n          \"select\": [\n            [\n              {\n          \
    \      \"params\": [\n                  \"value\"\n                ],\n      \
    \          \"type\": \"column\"\n              }\n            ]\n          ],\n\
    \          \"table\": \"transactions\",\n          \"timeColumn\": \"time\",\n\
    \          \"where\": []\n        }\n      ],\n      \"title\": \"Pending Transactions\"\
    ,\n      \"type\": \"stat\"\n    }\n  ],\n  \"schemaVersion\": 27,\n  \"style\"\
    : \"dark\",\n  \"tags\": [],\n  \"templating\": {\n    \"list\": []\n  },\n  \"\
    time\": {\n    \"from\": \"now-6h\",\n    \"to\": \"now\"\n  },\n  \"timepicker\"\
    : {},\n  \"timezone\": \"\",\n  \"title\": \"blockchain-demo Dashboard\",\n  \"\
    uid\": \"gtwblsjMk\",\n  \"version\": 4\n}"
