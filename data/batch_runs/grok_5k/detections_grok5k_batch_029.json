[
  {
    "id": "01161",
    "manifest_path": "data/manifests/the_stack_sample/sample_0309.yaml",
    "manifest_yaml": "apiVersion: batch/v1beta1\nkind: CronJob\nmetadata:\n  name: tf-nightly-retinanet-func-v3-8\n  namespace: automated\nspec:\n  jobTemplate:\n    template:\n      metadata:\n        annotations:\n          tf-version.cloud-tpus.google.com: nightly\n      spec:\n        containers:\n        - env:\n          - name: POD_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.name\n          - name: POD_NAMESPACE\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.namespace\n          image: gcr.io/xl-ml-test/health-monitor:stable\n          imagePullPolicy: Always\n          name: monitor\n        - args:\n          - python3\n          - official/vision/detection/main.py\n          - \"--params_override=\\\"architecture\\\":\\n  \\\"use_bfloat16\\\": true\\n\\\"eval\\\"\\\n            :\\n  \\\"batch_size\\\": 64\\n  \\\"eval_file_pattern\\\": \\\"$(COCO_DIR)/val*\\\"\\\n            \\n  \\\"val_json_file\\\": \\\"$(COCO_DIR)/instances_val2017.json\\\"\\n\\\"predict\\\"\\\n            :\\n  \\\"batch_size\\\": 64\\n\\\"train\\\":\\n  \\\"batch_size\\\": 64\\n  \\\"checkpoint\\\"\\\n            :\\n    \\\"path\\\": \\\"$(RESNET_PRETRAIN_DIR)/resnet50-checkpoint-2018-02-07\\\"\\\n            \\n    \\\"prefix\\\": \\\"resnet50/\\\"\\n  \\\"total_steps\\\": 1000\\n  \\\"train_file_pattern\\\"\\\n            : \\\"$(COCO_DIR)/train*\\\"\\n\"\n          - --model_dir=$(MODEL_DIR)\n          - --mode=train\n          - --tpu=$(KUBE_GOOGLE_CLOUD_TPU_ENDPOINTS)\n          - --strategy_type=tpu\n          env:\n          - name: POD_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.name\n          - name: POD_UID\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.uid\n          - name: POD_NAMESPACE\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.namespace\n          - name: JOB_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.labels['job-name']\n          - name: MODEL_DIR\n            value: $(OUTPUT_BUCKET)/tf-nightly/retinanet/func/v3-8/$(JOB_NAME)\n          envFrom:\n          - configMapRef:\n              name: gcs-buckets\n          image: gcr.io/xl-ml-test/tensorflow:nightly\n          imagePullPolicy: Always\n          name: train\n          resources:\n            limits:\n              cloud-tpus.google.com/preemptible-v3: 8\n            requests:\n              cpu: 2\n              memory: 20G\n          volumeMounts:\n          - mountPath: /dev/shm\n            name: dshm\n            readOnly: false\n        initContainers:\n        - env:\n          - name: POD_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.name\n          - name: POD_UID\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.uid\n          - name: POD_NAMESPACE\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.namespace\n          - name: JOB_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.labels['job-name']\n          - name: MODEL_DIR\n            value: $(OUTPUT_BUCKET)/tf-nightly/retinanet/func/v3-8/$(JOB_NAME)\n          - name: METRIC_CONFIG\n            value: \"{\\n \\\"metric_collection_config\\\": {\\n  \\\"default_aggregation_strategies\\\"\\\n              : [\\n   \\\"final\\\"\\n  ],\\n  \\\"metric_to_aggregation_strategies\\\": {\\n\\\n              \\   \\\"examples_per_second\\\": [\\n    \\\"average\\\"\\n   ]\\n  },\\n  \\\"use_run_name_prefix\\\"\\\n              : true,\\n  \\\"write_to_bigquery\\\": true\\n },\\n \\\"regression_test_config\\\"\\\n              : {\\n  \\\"metric_success_conditions\\\": {\\n   \\\"examples_per_second_average\\\"\\\n              : {\\n    \\\"comparison\\\": \\\"greater_or_equal\\\",\\n    \\\"success_threshold\\\"\\\n              : {\\n     \\\"stddevs_from_mean\\\": 4\\n    }\\n   },\\n   \\\"total_wall_time\\\"\\\n              : {\\n    \\\"comparison\\\": \\\"less\\\",\\n    \\\"success_threshold\\\": {\\n \\\n              \\    \\\"stddevs_from_mean\\\": 5\\n    },\\n    \\\"wait_for_n_points_of_history\\\"\\\n              : 10\\n   }\\n  }\\n },\\n \\\"test_name\\\": \\\"tf-nightly-retinanet-func-v3-8\\\"\\\n              \\n}\\n\"\n          envFrom:\n          - configMapRef:\n              name: gcs-buckets\n          image: gcr.io/xl-ml-test/publisher:stable\n          imagePullPolicy: Always\n          name: publisher\n        volumes:\n        - emptyDir:\n            medium: Memory\n          name: dshm\n",
    "policy_id": "unset-cpu-requirements",
    "violation_text": "container \"monitor\" has cpu request 0"
  },
  {
    "id": "01162",
    "manifest_path": "data/manifests/the_stack_sample/sample_0309.yaml",
    "manifest_yaml": "apiVersion: batch/v1beta1\nkind: CronJob\nmetadata:\n  name: tf-nightly-retinanet-func-v3-8\n  namespace: automated\nspec:\n  jobTemplate:\n    template:\n      metadata:\n        annotations:\n          tf-version.cloud-tpus.google.com: nightly\n      spec:\n        containers:\n        - env:\n          - name: POD_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.name\n          - name: POD_NAMESPACE\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.namespace\n          image: gcr.io/xl-ml-test/health-monitor:stable\n          imagePullPolicy: Always\n          name: monitor\n        - args:\n          - python3\n          - official/vision/detection/main.py\n          - \"--params_override=\\\"architecture\\\":\\n  \\\"use_bfloat16\\\": true\\n\\\"eval\\\"\\\n            :\\n  \\\"batch_size\\\": 64\\n  \\\"eval_file_pattern\\\": \\\"$(COCO_DIR)/val*\\\"\\\n            \\n  \\\"val_json_file\\\": \\\"$(COCO_DIR)/instances_val2017.json\\\"\\n\\\"predict\\\"\\\n            :\\n  \\\"batch_size\\\": 64\\n\\\"train\\\":\\n  \\\"batch_size\\\": 64\\n  \\\"checkpoint\\\"\\\n            :\\n    \\\"path\\\": \\\"$(RESNET_PRETRAIN_DIR)/resnet50-checkpoint-2018-02-07\\\"\\\n            \\n    \\\"prefix\\\": \\\"resnet50/\\\"\\n  \\\"total_steps\\\": 1000\\n  \\\"train_file_pattern\\\"\\\n            : \\\"$(COCO_DIR)/train*\\\"\\n\"\n          - --model_dir=$(MODEL_DIR)\n          - --mode=train\n          - --tpu=$(KUBE_GOOGLE_CLOUD_TPU_ENDPOINTS)\n          - --strategy_type=tpu\n          env:\n          - name: POD_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.name\n          - name: POD_UID\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.uid\n          - name: POD_NAMESPACE\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.namespace\n          - name: JOB_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.labels['job-name']\n          - name: MODEL_DIR\n            value: $(OUTPUT_BUCKET)/tf-nightly/retinanet/func/v3-8/$(JOB_NAME)\n          envFrom:\n          - configMapRef:\n              name: gcs-buckets\n          image: gcr.io/xl-ml-test/tensorflow:nightly\n          imagePullPolicy: Always\n          name: train\n          resources:\n            limits:\n              cloud-tpus.google.com/preemptible-v3: 8\n            requests:\n              cpu: 2\n              memory: 20G\n          volumeMounts:\n          - mountPath: /dev/shm\n            name: dshm\n            readOnly: false\n        initContainers:\n        - env:\n          - name: POD_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.name\n          - name: POD_UID\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.uid\n          - name: POD_NAMESPACE\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.namespace\n          - name: JOB_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.labels['job-name']\n          - name: MODEL_DIR\n            value: $(OUTPUT_BUCKET)/tf-nightly/retinanet/func/v3-8/$(JOB_NAME)\n          - name: METRIC_CONFIG\n            value: \"{\\n \\\"metric_collection_config\\\": {\\n  \\\"default_aggregation_strategies\\\"\\\n              : [\\n   \\\"final\\\"\\n  ],\\n  \\\"metric_to_aggregation_strategies\\\": {\\n\\\n              \\   \\\"examples_per_second\\\": [\\n    \\\"average\\\"\\n   ]\\n  },\\n  \\\"use_run_name_prefix\\\"\\\n              : true,\\n  \\\"write_to_bigquery\\\": true\\n },\\n \\\"regression_test_config\\\"\\\n              : {\\n  \\\"metric_success_conditions\\\": {\\n   \\\"examples_per_second_average\\\"\\\n              : {\\n    \\\"comparison\\\": \\\"greater_or_equal\\\",\\n    \\\"success_threshold\\\"\\\n              : {\\n     \\\"stddevs_from_mean\\\": 4\\n    }\\n   },\\n   \\\"total_wall_time\\\"\\\n              : {\\n    \\\"comparison\\\": \\\"less\\\",\\n    \\\"success_threshold\\\": {\\n \\\n              \\    \\\"stddevs_from_mean\\\": 5\\n    },\\n    \\\"wait_for_n_points_of_history\\\"\\\n              : 10\\n   }\\n  }\\n },\\n \\\"test_name\\\": \\\"tf-nightly-retinanet-func-v3-8\\\"\\\n              \\n}\\n\"\n          envFrom:\n          - configMapRef:\n              name: gcs-buckets\n          image: gcr.io/xl-ml-test/publisher:stable\n          imagePullPolicy: Always\n          name: publisher\n        volumes:\n        - emptyDir:\n            medium: Memory\n          name: dshm\n",
    "policy_id": "unset-cpu-requirements",
    "violation_text": "container \"publisher\" has cpu request 0"
  },
  {
    "id": "01163",
    "manifest_path": "data/manifests/the_stack_sample/sample_0309.yaml",
    "manifest_yaml": "apiVersion: batch/v1beta1\nkind: CronJob\nmetadata:\n  name: tf-nightly-retinanet-func-v3-8\n  namespace: automated\nspec:\n  jobTemplate:\n    template:\n      metadata:\n        annotations:\n          tf-version.cloud-tpus.google.com: nightly\n      spec:\n        containers:\n        - env:\n          - name: POD_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.name\n          - name: POD_NAMESPACE\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.namespace\n          image: gcr.io/xl-ml-test/health-monitor:stable\n          imagePullPolicy: Always\n          name: monitor\n        - args:\n          - python3\n          - official/vision/detection/main.py\n          - \"--params_override=\\\"architecture\\\":\\n  \\\"use_bfloat16\\\": true\\n\\\"eval\\\"\\\n            :\\n  \\\"batch_size\\\": 64\\n  \\\"eval_file_pattern\\\": \\\"$(COCO_DIR)/val*\\\"\\\n            \\n  \\\"val_json_file\\\": \\\"$(COCO_DIR)/instances_val2017.json\\\"\\n\\\"predict\\\"\\\n            :\\n  \\\"batch_size\\\": 64\\n\\\"train\\\":\\n  \\\"batch_size\\\": 64\\n  \\\"checkpoint\\\"\\\n            :\\n    \\\"path\\\": \\\"$(RESNET_PRETRAIN_DIR)/resnet50-checkpoint-2018-02-07\\\"\\\n            \\n    \\\"prefix\\\": \\\"resnet50/\\\"\\n  \\\"total_steps\\\": 1000\\n  \\\"train_file_pattern\\\"\\\n            : \\\"$(COCO_DIR)/train*\\\"\\n\"\n          - --model_dir=$(MODEL_DIR)\n          - --mode=train\n          - --tpu=$(KUBE_GOOGLE_CLOUD_TPU_ENDPOINTS)\n          - --strategy_type=tpu\n          env:\n          - name: POD_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.name\n          - name: POD_UID\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.uid\n          - name: POD_NAMESPACE\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.namespace\n          - name: JOB_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.labels['job-name']\n          - name: MODEL_DIR\n            value: $(OUTPUT_BUCKET)/tf-nightly/retinanet/func/v3-8/$(JOB_NAME)\n          envFrom:\n          - configMapRef:\n              name: gcs-buckets\n          image: gcr.io/xl-ml-test/tensorflow:nightly\n          imagePullPolicy: Always\n          name: train\n          resources:\n            limits:\n              cloud-tpus.google.com/preemptible-v3: 8\n            requests:\n              cpu: 2\n              memory: 20G\n          volumeMounts:\n          - mountPath: /dev/shm\n            name: dshm\n            readOnly: false\n        initContainers:\n        - env:\n          - name: POD_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.name\n          - name: POD_UID\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.uid\n          - name: POD_NAMESPACE\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.namespace\n          - name: JOB_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.labels['job-name']\n          - name: MODEL_DIR\n            value: $(OUTPUT_BUCKET)/tf-nightly/retinanet/func/v3-8/$(JOB_NAME)\n          - name: METRIC_CONFIG\n            value: \"{\\n \\\"metric_collection_config\\\": {\\n  \\\"default_aggregation_strategies\\\"\\\n              : [\\n   \\\"final\\\"\\n  ],\\n  \\\"metric_to_aggregation_strategies\\\": {\\n\\\n              \\   \\\"examples_per_second\\\": [\\n    \\\"average\\\"\\n   ]\\n  },\\n  \\\"use_run_name_prefix\\\"\\\n              : true,\\n  \\\"write_to_bigquery\\\": true\\n },\\n \\\"regression_test_config\\\"\\\n              : {\\n  \\\"metric_success_conditions\\\": {\\n   \\\"examples_per_second_average\\\"\\\n              : {\\n    \\\"comparison\\\": \\\"greater_or_equal\\\",\\n    \\\"success_threshold\\\"\\\n              : {\\n     \\\"stddevs_from_mean\\\": 4\\n    }\\n   },\\n   \\\"total_wall_time\\\"\\\n              : {\\n    \\\"comparison\\\": \\\"less\\\",\\n    \\\"success_threshold\\\": {\\n \\\n              \\    \\\"stddevs_from_mean\\\": 5\\n    },\\n    \\\"wait_for_n_points_of_history\\\"\\\n              : 10\\n   }\\n  }\\n },\\n \\\"test_name\\\": \\\"tf-nightly-retinanet-func-v3-8\\\"\\\n              \\n}\\n\"\n          envFrom:\n          - configMapRef:\n              name: gcs-buckets\n          image: gcr.io/xl-ml-test/publisher:stable\n          imagePullPolicy: Always\n          name: publisher\n        volumes:\n        - emptyDir:\n            medium: Memory\n          name: dshm\n",
    "policy_id": "unset-memory-requirements",
    "violation_text": "container \"monitor\" has memory limit 0"
  },
  {
    "id": "01164",
    "manifest_path": "data/manifests/the_stack_sample/sample_0309.yaml",
    "manifest_yaml": "apiVersion: batch/v1beta1\nkind: CronJob\nmetadata:\n  name: tf-nightly-retinanet-func-v3-8\n  namespace: automated\nspec:\n  jobTemplate:\n    template:\n      metadata:\n        annotations:\n          tf-version.cloud-tpus.google.com: nightly\n      spec:\n        containers:\n        - env:\n          - name: POD_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.name\n          - name: POD_NAMESPACE\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.namespace\n          image: gcr.io/xl-ml-test/health-monitor:stable\n          imagePullPolicy: Always\n          name: monitor\n        - args:\n          - python3\n          - official/vision/detection/main.py\n          - \"--params_override=\\\"architecture\\\":\\n  \\\"use_bfloat16\\\": true\\n\\\"eval\\\"\\\n            :\\n  \\\"batch_size\\\": 64\\n  \\\"eval_file_pattern\\\": \\\"$(COCO_DIR)/val*\\\"\\\n            \\n  \\\"val_json_file\\\": \\\"$(COCO_DIR)/instances_val2017.json\\\"\\n\\\"predict\\\"\\\n            :\\n  \\\"batch_size\\\": 64\\n\\\"train\\\":\\n  \\\"batch_size\\\": 64\\n  \\\"checkpoint\\\"\\\n            :\\n    \\\"path\\\": \\\"$(RESNET_PRETRAIN_DIR)/resnet50-checkpoint-2018-02-07\\\"\\\n            \\n    \\\"prefix\\\": \\\"resnet50/\\\"\\n  \\\"total_steps\\\": 1000\\n  \\\"train_file_pattern\\\"\\\n            : \\\"$(COCO_DIR)/train*\\\"\\n\"\n          - --model_dir=$(MODEL_DIR)\n          - --mode=train\n          - --tpu=$(KUBE_GOOGLE_CLOUD_TPU_ENDPOINTS)\n          - --strategy_type=tpu\n          env:\n          - name: POD_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.name\n          - name: POD_UID\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.uid\n          - name: POD_NAMESPACE\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.namespace\n          - name: JOB_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.labels['job-name']\n          - name: MODEL_DIR\n            value: $(OUTPUT_BUCKET)/tf-nightly/retinanet/func/v3-8/$(JOB_NAME)\n          envFrom:\n          - configMapRef:\n              name: gcs-buckets\n          image: gcr.io/xl-ml-test/tensorflow:nightly\n          imagePullPolicy: Always\n          name: train\n          resources:\n            limits:\n              cloud-tpus.google.com/preemptible-v3: 8\n            requests:\n              cpu: 2\n              memory: 20G\n          volumeMounts:\n          - mountPath: /dev/shm\n            name: dshm\n            readOnly: false\n        initContainers:\n        - env:\n          - name: POD_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.name\n          - name: POD_UID\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.uid\n          - name: POD_NAMESPACE\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.namespace\n          - name: JOB_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.labels['job-name']\n          - name: MODEL_DIR\n            value: $(OUTPUT_BUCKET)/tf-nightly/retinanet/func/v3-8/$(JOB_NAME)\n          - name: METRIC_CONFIG\n            value: \"{\\n \\\"metric_collection_config\\\": {\\n  \\\"default_aggregation_strategies\\\"\\\n              : [\\n   \\\"final\\\"\\n  ],\\n  \\\"metric_to_aggregation_strategies\\\": {\\n\\\n              \\   \\\"examples_per_second\\\": [\\n    \\\"average\\\"\\n   ]\\n  },\\n  \\\"use_run_name_prefix\\\"\\\n              : true,\\n  \\\"write_to_bigquery\\\": true\\n },\\n \\\"regression_test_config\\\"\\\n              : {\\n  \\\"metric_success_conditions\\\": {\\n   \\\"examples_per_second_average\\\"\\\n              : {\\n    \\\"comparison\\\": \\\"greater_or_equal\\\",\\n    \\\"success_threshold\\\"\\\n              : {\\n     \\\"stddevs_from_mean\\\": 4\\n    }\\n   },\\n   \\\"total_wall_time\\\"\\\n              : {\\n    \\\"comparison\\\": \\\"less\\\",\\n    \\\"success_threshold\\\": {\\n \\\n              \\    \\\"stddevs_from_mean\\\": 5\\n    },\\n    \\\"wait_for_n_points_of_history\\\"\\\n              : 10\\n   }\\n  }\\n },\\n \\\"test_name\\\": \\\"tf-nightly-retinanet-func-v3-8\\\"\\\n              \\n}\\n\"\n          envFrom:\n          - configMapRef:\n              name: gcs-buckets\n          image: gcr.io/xl-ml-test/publisher:stable\n          imagePullPolicy: Always\n          name: publisher\n        volumes:\n        - emptyDir:\n            medium: Memory\n          name: dshm\n",
    "policy_id": "unset-memory-requirements",
    "violation_text": "container \"publisher\" has memory limit 0"
  },
  {
    "id": "01165",
    "manifest_path": "data/manifests/the_stack_sample/sample_0309.yaml",
    "manifest_yaml": "apiVersion: batch/v1beta1\nkind: CronJob\nmetadata:\n  name: tf-nightly-retinanet-func-v3-8\n  namespace: automated\nspec:\n  jobTemplate:\n    template:\n      metadata:\n        annotations:\n          tf-version.cloud-tpus.google.com: nightly\n      spec:\n        containers:\n        - env:\n          - name: POD_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.name\n          - name: POD_NAMESPACE\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.namespace\n          image: gcr.io/xl-ml-test/health-monitor:stable\n          imagePullPolicy: Always\n          name: monitor\n        - args:\n          - python3\n          - official/vision/detection/main.py\n          - \"--params_override=\\\"architecture\\\":\\n  \\\"use_bfloat16\\\": true\\n\\\"eval\\\"\\\n            :\\n  \\\"batch_size\\\": 64\\n  \\\"eval_file_pattern\\\": \\\"$(COCO_DIR)/val*\\\"\\\n            \\n  \\\"val_json_file\\\": \\\"$(COCO_DIR)/instances_val2017.json\\\"\\n\\\"predict\\\"\\\n            :\\n  \\\"batch_size\\\": 64\\n\\\"train\\\":\\n  \\\"batch_size\\\": 64\\n  \\\"checkpoint\\\"\\\n            :\\n    \\\"path\\\": \\\"$(RESNET_PRETRAIN_DIR)/resnet50-checkpoint-2018-02-07\\\"\\\n            \\n    \\\"prefix\\\": \\\"resnet50/\\\"\\n  \\\"total_steps\\\": 1000\\n  \\\"train_file_pattern\\\"\\\n            : \\\"$(COCO_DIR)/train*\\\"\\n\"\n          - --model_dir=$(MODEL_DIR)\n          - --mode=train\n          - --tpu=$(KUBE_GOOGLE_CLOUD_TPU_ENDPOINTS)\n          - --strategy_type=tpu\n          env:\n          - name: POD_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.name\n          - name: POD_UID\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.uid\n          - name: POD_NAMESPACE\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.namespace\n          - name: JOB_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.labels['job-name']\n          - name: MODEL_DIR\n            value: $(OUTPUT_BUCKET)/tf-nightly/retinanet/func/v3-8/$(JOB_NAME)\n          envFrom:\n          - configMapRef:\n              name: gcs-buckets\n          image: gcr.io/xl-ml-test/tensorflow:nightly\n          imagePullPolicy: Always\n          name: train\n          resources:\n            limits:\n              cloud-tpus.google.com/preemptible-v3: 8\n            requests:\n              cpu: 2\n              memory: 20G\n          volumeMounts:\n          - mountPath: /dev/shm\n            name: dshm\n            readOnly: false\n        initContainers:\n        - env:\n          - name: POD_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.name\n          - name: POD_UID\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.uid\n          - name: POD_NAMESPACE\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.namespace\n          - name: JOB_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.labels['job-name']\n          - name: MODEL_DIR\n            value: $(OUTPUT_BUCKET)/tf-nightly/retinanet/func/v3-8/$(JOB_NAME)\n          - name: METRIC_CONFIG\n            value: \"{\\n \\\"metric_collection_config\\\": {\\n  \\\"default_aggregation_strategies\\\"\\\n              : [\\n   \\\"final\\\"\\n  ],\\n  \\\"metric_to_aggregation_strategies\\\": {\\n\\\n              \\   \\\"examples_per_second\\\": [\\n    \\\"average\\\"\\n   ]\\n  },\\n  \\\"use_run_name_prefix\\\"\\\n              : true,\\n  \\\"write_to_bigquery\\\": true\\n },\\n \\\"regression_test_config\\\"\\\n              : {\\n  \\\"metric_success_conditions\\\": {\\n   \\\"examples_per_second_average\\\"\\\n              : {\\n    \\\"comparison\\\": \\\"greater_or_equal\\\",\\n    \\\"success_threshold\\\"\\\n              : {\\n     \\\"stddevs_from_mean\\\": 4\\n    }\\n   },\\n   \\\"total_wall_time\\\"\\\n              : {\\n    \\\"comparison\\\": \\\"less\\\",\\n    \\\"success_threshold\\\": {\\n \\\n              \\    \\\"stddevs_from_mean\\\": 5\\n    },\\n    \\\"wait_for_n_points_of_history\\\"\\\n              : 10\\n   }\\n  }\\n },\\n \\\"test_name\\\": \\\"tf-nightly-retinanet-func-v3-8\\\"\\\n              \\n}\\n\"\n          envFrom:\n          - configMapRef:\n              name: gcs-buckets\n          image: gcr.io/xl-ml-test/publisher:stable\n          imagePullPolicy: Always\n          name: publisher\n        volumes:\n        - emptyDir:\n            medium: Memory\n          name: dshm\n",
    "policy_id": "unset-memory-requirements",
    "violation_text": "container \"train\" has memory limit 0"
  },
  {
    "id": "01166",
    "manifest_path": "data/manifests/the_stack_sample/sample_0311.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: api-server\nspec:\n  selector:\n    matchLabels:\n      name: api-server\n  template:\n    metadata:\n      labels:\n        name: api-server\n    spec:\n      containers:\n      - name: api-server\n        image: gcr.io/pl-dev-infra/cloud/api_server_image\n        ports:\n        - containerPort: 51200\n        readinessProbe:\n          httpGet:\n            scheme: HTTPS\n            path: /healthz\n            port: 51200\n        livenessProbe:\n          httpGet:\n            scheme: HTTPS\n            path: /healthz\n            port: 51200\n        envFrom:\n        - configMapRef:\n            name: pl-tls-config\n        - configMapRef:\n            name: pl-domain-config\n        env:\n        - name: PL_JWT_SIGNING_KEY\n          valueFrom:\n            secretKeyRef:\n              name: cloud-auth-secrets\n              key: jwt-signing-key\n        - name: PL_SESSION_KEY\n          valueFrom:\n            secretKeyRef:\n              name: cloud-session-secrets\n              key: session-key\n        - name: PL_VZMGR_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_VZMGR_SERVICE\n        - name: PL_AUTH_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_AUTH_SERVICE\n        - name: PL_PROJECT_MANAGER_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_PROJECT_MANAGER_SERVICE\n        - name: PL_PROFILE_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_PROFILE_SERVICE\n        - name: PL_ARTIFACT_TRACKER_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_ARTIFACT_TRACKER_SERVICE\n        - name: PL_ELASTIC_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_ELASTIC_SERVICE\n        - name: PL_SEGMENT_WRITE_KEY\n          valueFrom:\n            configMapKeyRef:\n              name: segment-config\n              key: write-key\n        - name: PL_VIZIER_IMAGE_SECRET_PATH\n          value: /vizier-image-secret\n        - name: PL_VIZIER_IMAGE_SECRET_FILE\n          value: vizier_image_secret.json\n        - name: PL_ELASTIC_USERNAME\n          value: elastic\n        - name: PL_ELASTIC_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: pl-elastic-es-elastic-user\n              key: elastic\n        - name: PL_ELASTIC_CA_CERT\n          value: /elastic-certs-pub/tls.crt\n        - name: PL_WORK_DOMAIN\n          value: work.$(PL_DOMAIN_NAME)\n        - name: PL_KRATOS_BROWSER_URL\n          value: https://$(PL_WORK_DOMAIN)/oauth/kratos\n        volumeMounts:\n        - name: certs\n          mountPath: /certs\n        - name: vizier-image-secret\n          mountPath: /vizier-image-secret\n        - name: elastic-certs-pub\n          mountPath: /elastic-certs-pub\n      volumes:\n      - name: certs\n        secret:\n          secretName: service-tls-certs\n      - name: vizier-image-secret\n        secret:\n          secretName: vizier-image-secret\n          optional: true\n      - name: envoy-yaml\n        configMap:\n          name: proxy-envoy-config\n      - name: elastic-certs-pub\n        secret:\n          secretName: pl-elastic-es-http-certs-public\n",
    "policy_id": "env-var-secret",
    "violation_text": "environment variable PL_VIZIER_IMAGE_SECRET_FILE in container \"api-server\" found"
  },
  {
    "id": "01167",
    "manifest_path": "data/manifests/the_stack_sample/sample_0311.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: api-server\nspec:\n  selector:\n    matchLabels:\n      name: api-server\n  template:\n    metadata:\n      labels:\n        name: api-server\n    spec:\n      containers:\n      - name: api-server\n        image: gcr.io/pl-dev-infra/cloud/api_server_image\n        ports:\n        - containerPort: 51200\n        readinessProbe:\n          httpGet:\n            scheme: HTTPS\n            path: /healthz\n            port: 51200\n        livenessProbe:\n          httpGet:\n            scheme: HTTPS\n            path: /healthz\n            port: 51200\n        envFrom:\n        - configMapRef:\n            name: pl-tls-config\n        - configMapRef:\n            name: pl-domain-config\n        env:\n        - name: PL_JWT_SIGNING_KEY\n          valueFrom:\n            secretKeyRef:\n              name: cloud-auth-secrets\n              key: jwt-signing-key\n        - name: PL_SESSION_KEY\n          valueFrom:\n            secretKeyRef:\n              name: cloud-session-secrets\n              key: session-key\n        - name: PL_VZMGR_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_VZMGR_SERVICE\n        - name: PL_AUTH_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_AUTH_SERVICE\n        - name: PL_PROJECT_MANAGER_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_PROJECT_MANAGER_SERVICE\n        - name: PL_PROFILE_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_PROFILE_SERVICE\n        - name: PL_ARTIFACT_TRACKER_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_ARTIFACT_TRACKER_SERVICE\n        - name: PL_ELASTIC_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_ELASTIC_SERVICE\n        - name: PL_SEGMENT_WRITE_KEY\n          valueFrom:\n            configMapKeyRef:\n              name: segment-config\n              key: write-key\n        - name: PL_VIZIER_IMAGE_SECRET_PATH\n          value: /vizier-image-secret\n        - name: PL_VIZIER_IMAGE_SECRET_FILE\n          value: vizier_image_secret.json\n        - name: PL_ELASTIC_USERNAME\n          value: elastic\n        - name: PL_ELASTIC_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: pl-elastic-es-elastic-user\n              key: elastic\n        - name: PL_ELASTIC_CA_CERT\n          value: /elastic-certs-pub/tls.crt\n        - name: PL_WORK_DOMAIN\n          value: work.$(PL_DOMAIN_NAME)\n        - name: PL_KRATOS_BROWSER_URL\n          value: https://$(PL_WORK_DOMAIN)/oauth/kratos\n        volumeMounts:\n        - name: certs\n          mountPath: /certs\n        - name: vizier-image-secret\n          mountPath: /vizier-image-secret\n        - name: elastic-certs-pub\n          mountPath: /elastic-certs-pub\n      volumes:\n      - name: certs\n        secret:\n          secretName: service-tls-certs\n      - name: vizier-image-secret\n        secret:\n          secretName: vizier-image-secret\n          optional: true\n      - name: envoy-yaml\n        configMap:\n          name: proxy-envoy-config\n      - name: elastic-certs-pub\n        secret:\n          secretName: pl-elastic-es-http-certs-public\n",
    "policy_id": "env-var-secret",
    "violation_text": "environment variable PL_VIZIER_IMAGE_SECRET_PATH in container \"api-server\" found"
  },
  {
    "id": "01168",
    "manifest_path": "data/manifests/the_stack_sample/sample_0311.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: api-server\nspec:\n  selector:\n    matchLabels:\n      name: api-server\n  template:\n    metadata:\n      labels:\n        name: api-server\n    spec:\n      containers:\n      - name: api-server\n        image: gcr.io/pl-dev-infra/cloud/api_server_image\n        ports:\n        - containerPort: 51200\n        readinessProbe:\n          httpGet:\n            scheme: HTTPS\n            path: /healthz\n            port: 51200\n        livenessProbe:\n          httpGet:\n            scheme: HTTPS\n            path: /healthz\n            port: 51200\n        envFrom:\n        - configMapRef:\n            name: pl-tls-config\n        - configMapRef:\n            name: pl-domain-config\n        env:\n        - name: PL_JWT_SIGNING_KEY\n          valueFrom:\n            secretKeyRef:\n              name: cloud-auth-secrets\n              key: jwt-signing-key\n        - name: PL_SESSION_KEY\n          valueFrom:\n            secretKeyRef:\n              name: cloud-session-secrets\n              key: session-key\n        - name: PL_VZMGR_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_VZMGR_SERVICE\n        - name: PL_AUTH_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_AUTH_SERVICE\n        - name: PL_PROJECT_MANAGER_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_PROJECT_MANAGER_SERVICE\n        - name: PL_PROFILE_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_PROFILE_SERVICE\n        - name: PL_ARTIFACT_TRACKER_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_ARTIFACT_TRACKER_SERVICE\n        - name: PL_ELASTIC_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_ELASTIC_SERVICE\n        - name: PL_SEGMENT_WRITE_KEY\n          valueFrom:\n            configMapKeyRef:\n              name: segment-config\n              key: write-key\n        - name: PL_VIZIER_IMAGE_SECRET_PATH\n          value: /vizier-image-secret\n        - name: PL_VIZIER_IMAGE_SECRET_FILE\n          value: vizier_image_secret.json\n        - name: PL_ELASTIC_USERNAME\n          value: elastic\n        - name: PL_ELASTIC_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: pl-elastic-es-elastic-user\n              key: elastic\n        - name: PL_ELASTIC_CA_CERT\n          value: /elastic-certs-pub/tls.crt\n        - name: PL_WORK_DOMAIN\n          value: work.$(PL_DOMAIN_NAME)\n        - name: PL_KRATOS_BROWSER_URL\n          value: https://$(PL_WORK_DOMAIN)/oauth/kratos\n        volumeMounts:\n        - name: certs\n          mountPath: /certs\n        - name: vizier-image-secret\n          mountPath: /vizier-image-secret\n        - name: elastic-certs-pub\n          mountPath: /elastic-certs-pub\n      volumes:\n      - name: certs\n        secret:\n          secretName: service-tls-certs\n      - name: vizier-image-secret\n        secret:\n          secretName: vizier-image-secret\n          optional: true\n      - name: envoy-yaml\n        configMap:\n          name: proxy-envoy-config\n      - name: elastic-certs-pub\n        secret:\n          secretName: pl-elastic-es-http-certs-public\n",
    "policy_id": "latest-tag",
    "violation_text": "The container \"api-server\" is using an invalid container image, \"gcr.io/pl-dev-infra/cloud/api_server_image\". Please use images that are not blocked by the `BlockList` criteria : [\".*:(latest)$\" \"^[^:]*$\" \"(.*/[^:]+)$\"]"
  },
  {
    "id": "01169",
    "manifest_path": "data/manifests/the_stack_sample/sample_0311.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: api-server\nspec:\n  selector:\n    matchLabels:\n      name: api-server\n  template:\n    metadata:\n      labels:\n        name: api-server\n    spec:\n      containers:\n      - name: api-server\n        image: gcr.io/pl-dev-infra/cloud/api_server_image\n        ports:\n        - containerPort: 51200\n        readinessProbe:\n          httpGet:\n            scheme: HTTPS\n            path: /healthz\n            port: 51200\n        livenessProbe:\n          httpGet:\n            scheme: HTTPS\n            path: /healthz\n            port: 51200\n        envFrom:\n        - configMapRef:\n            name: pl-tls-config\n        - configMapRef:\n            name: pl-domain-config\n        env:\n        - name: PL_JWT_SIGNING_KEY\n          valueFrom:\n            secretKeyRef:\n              name: cloud-auth-secrets\n              key: jwt-signing-key\n        - name: PL_SESSION_KEY\n          valueFrom:\n            secretKeyRef:\n              name: cloud-session-secrets\n              key: session-key\n        - name: PL_VZMGR_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_VZMGR_SERVICE\n        - name: PL_AUTH_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_AUTH_SERVICE\n        - name: PL_PROJECT_MANAGER_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_PROJECT_MANAGER_SERVICE\n        - name: PL_PROFILE_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_PROFILE_SERVICE\n        - name: PL_ARTIFACT_TRACKER_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_ARTIFACT_TRACKER_SERVICE\n        - name: PL_ELASTIC_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_ELASTIC_SERVICE\n        - name: PL_SEGMENT_WRITE_KEY\n          valueFrom:\n            configMapKeyRef:\n              name: segment-config\n              key: write-key\n        - name: PL_VIZIER_IMAGE_SECRET_PATH\n          value: /vizier-image-secret\n        - name: PL_VIZIER_IMAGE_SECRET_FILE\n          value: vizier_image_secret.json\n        - name: PL_ELASTIC_USERNAME\n          value: elastic\n        - name: PL_ELASTIC_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: pl-elastic-es-elastic-user\n              key: elastic\n        - name: PL_ELASTIC_CA_CERT\n          value: /elastic-certs-pub/tls.crt\n        - name: PL_WORK_DOMAIN\n          value: work.$(PL_DOMAIN_NAME)\n        - name: PL_KRATOS_BROWSER_URL\n          value: https://$(PL_WORK_DOMAIN)/oauth/kratos\n        volumeMounts:\n        - name: certs\n          mountPath: /certs\n        - name: vizier-image-secret\n          mountPath: /vizier-image-secret\n        - name: elastic-certs-pub\n          mountPath: /elastic-certs-pub\n      volumes:\n      - name: certs\n        secret:\n          secretName: service-tls-certs\n      - name: vizier-image-secret\n        secret:\n          secretName: vizier-image-secret\n          optional: true\n      - name: envoy-yaml\n        configMap:\n          name: proxy-envoy-config\n      - name: elastic-certs-pub\n        secret:\n          secretName: pl-elastic-es-http-certs-public\n",
    "policy_id": "no-read-only-root-fs",
    "violation_text": "container \"api-server\" does not have a read-only root file system"
  },
  {
    "id": "01170",
    "manifest_path": "data/manifests/the_stack_sample/sample_0311.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: api-server\nspec:\n  selector:\n    matchLabels:\n      name: api-server\n  template:\n    metadata:\n      labels:\n        name: api-server\n    spec:\n      containers:\n      - name: api-server\n        image: gcr.io/pl-dev-infra/cloud/api_server_image\n        ports:\n        - containerPort: 51200\n        readinessProbe:\n          httpGet:\n            scheme: HTTPS\n            path: /healthz\n            port: 51200\n        livenessProbe:\n          httpGet:\n            scheme: HTTPS\n            path: /healthz\n            port: 51200\n        envFrom:\n        - configMapRef:\n            name: pl-tls-config\n        - configMapRef:\n            name: pl-domain-config\n        env:\n        - name: PL_JWT_SIGNING_KEY\n          valueFrom:\n            secretKeyRef:\n              name: cloud-auth-secrets\n              key: jwt-signing-key\n        - name: PL_SESSION_KEY\n          valueFrom:\n            secretKeyRef:\n              name: cloud-session-secrets\n              key: session-key\n        - name: PL_VZMGR_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_VZMGR_SERVICE\n        - name: PL_AUTH_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_AUTH_SERVICE\n        - name: PL_PROJECT_MANAGER_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_PROJECT_MANAGER_SERVICE\n        - name: PL_PROFILE_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_PROFILE_SERVICE\n        - name: PL_ARTIFACT_TRACKER_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_ARTIFACT_TRACKER_SERVICE\n        - name: PL_ELASTIC_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_ELASTIC_SERVICE\n        - name: PL_SEGMENT_WRITE_KEY\n          valueFrom:\n            configMapKeyRef:\n              name: segment-config\n              key: write-key\n        - name: PL_VIZIER_IMAGE_SECRET_PATH\n          value: /vizier-image-secret\n        - name: PL_VIZIER_IMAGE_SECRET_FILE\n          value: vizier_image_secret.json\n        - name: PL_ELASTIC_USERNAME\n          value: elastic\n        - name: PL_ELASTIC_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: pl-elastic-es-elastic-user\n              key: elastic\n        - name: PL_ELASTIC_CA_CERT\n          value: /elastic-certs-pub/tls.crt\n        - name: PL_WORK_DOMAIN\n          value: work.$(PL_DOMAIN_NAME)\n        - name: PL_KRATOS_BROWSER_URL\n          value: https://$(PL_WORK_DOMAIN)/oauth/kratos\n        volumeMounts:\n        - name: certs\n          mountPath: /certs\n        - name: vizier-image-secret\n          mountPath: /vizier-image-secret\n        - name: elastic-certs-pub\n          mountPath: /elastic-certs-pub\n      volumes:\n      - name: certs\n        secret:\n          secretName: service-tls-certs\n      - name: vizier-image-secret\n        secret:\n          secretName: vizier-image-secret\n          optional: true\n      - name: envoy-yaml\n        configMap:\n          name: proxy-envoy-config\n      - name: elastic-certs-pub\n        secret:\n          secretName: pl-elastic-es-http-certs-public\n",
    "policy_id": "run-as-non-root",
    "violation_text": "container \"api-server\" is not set to runAsNonRoot"
  },
  {
    "id": "01171",
    "manifest_path": "data/manifests/the_stack_sample/sample_0311.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: api-server\nspec:\n  selector:\n    matchLabels:\n      name: api-server\n  template:\n    metadata:\n      labels:\n        name: api-server\n    spec:\n      containers:\n      - name: api-server\n        image: gcr.io/pl-dev-infra/cloud/api_server_image\n        ports:\n        - containerPort: 51200\n        readinessProbe:\n          httpGet:\n            scheme: HTTPS\n            path: /healthz\n            port: 51200\n        livenessProbe:\n          httpGet:\n            scheme: HTTPS\n            path: /healthz\n            port: 51200\n        envFrom:\n        - configMapRef:\n            name: pl-tls-config\n        - configMapRef:\n            name: pl-domain-config\n        env:\n        - name: PL_JWT_SIGNING_KEY\n          valueFrom:\n            secretKeyRef:\n              name: cloud-auth-secrets\n              key: jwt-signing-key\n        - name: PL_SESSION_KEY\n          valueFrom:\n            secretKeyRef:\n              name: cloud-session-secrets\n              key: session-key\n        - name: PL_VZMGR_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_VZMGR_SERVICE\n        - name: PL_AUTH_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_AUTH_SERVICE\n        - name: PL_PROJECT_MANAGER_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_PROJECT_MANAGER_SERVICE\n        - name: PL_PROFILE_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_PROFILE_SERVICE\n        - name: PL_ARTIFACT_TRACKER_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_ARTIFACT_TRACKER_SERVICE\n        - name: PL_ELASTIC_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_ELASTIC_SERVICE\n        - name: PL_SEGMENT_WRITE_KEY\n          valueFrom:\n            configMapKeyRef:\n              name: segment-config\n              key: write-key\n        - name: PL_VIZIER_IMAGE_SECRET_PATH\n          value: /vizier-image-secret\n        - name: PL_VIZIER_IMAGE_SECRET_FILE\n          value: vizier_image_secret.json\n        - name: PL_ELASTIC_USERNAME\n          value: elastic\n        - name: PL_ELASTIC_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: pl-elastic-es-elastic-user\n              key: elastic\n        - name: PL_ELASTIC_CA_CERT\n          value: /elastic-certs-pub/tls.crt\n        - name: PL_WORK_DOMAIN\n          value: work.$(PL_DOMAIN_NAME)\n        - name: PL_KRATOS_BROWSER_URL\n          value: https://$(PL_WORK_DOMAIN)/oauth/kratos\n        volumeMounts:\n        - name: certs\n          mountPath: /certs\n        - name: vizier-image-secret\n          mountPath: /vizier-image-secret\n        - name: elastic-certs-pub\n          mountPath: /elastic-certs-pub\n      volumes:\n      - name: certs\n        secret:\n          secretName: service-tls-certs\n      - name: vizier-image-secret\n        secret:\n          secretName: vizier-image-secret\n          optional: true\n      - name: envoy-yaml\n        configMap:\n          name: proxy-envoy-config\n      - name: elastic-certs-pub\n        secret:\n          secretName: pl-elastic-es-http-certs-public\n",
    "policy_id": "unset-cpu-requirements",
    "violation_text": "container \"api-server\" has cpu request 0"
  },
  {
    "id": "01172",
    "manifest_path": "data/manifests/the_stack_sample/sample_0311.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: api-server\nspec:\n  selector:\n    matchLabels:\n      name: api-server\n  template:\n    metadata:\n      labels:\n        name: api-server\n    spec:\n      containers:\n      - name: api-server\n        image: gcr.io/pl-dev-infra/cloud/api_server_image\n        ports:\n        - containerPort: 51200\n        readinessProbe:\n          httpGet:\n            scheme: HTTPS\n            path: /healthz\n            port: 51200\n        livenessProbe:\n          httpGet:\n            scheme: HTTPS\n            path: /healthz\n            port: 51200\n        envFrom:\n        - configMapRef:\n            name: pl-tls-config\n        - configMapRef:\n            name: pl-domain-config\n        env:\n        - name: PL_JWT_SIGNING_KEY\n          valueFrom:\n            secretKeyRef:\n              name: cloud-auth-secrets\n              key: jwt-signing-key\n        - name: PL_SESSION_KEY\n          valueFrom:\n            secretKeyRef:\n              name: cloud-session-secrets\n              key: session-key\n        - name: PL_VZMGR_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_VZMGR_SERVICE\n        - name: PL_AUTH_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_AUTH_SERVICE\n        - name: PL_PROJECT_MANAGER_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_PROJECT_MANAGER_SERVICE\n        - name: PL_PROFILE_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_PROFILE_SERVICE\n        - name: PL_ARTIFACT_TRACKER_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_ARTIFACT_TRACKER_SERVICE\n        - name: PL_ELASTIC_SERVICE\n          valueFrom:\n            configMapKeyRef:\n              name: pl-service-config\n              key: PL_ELASTIC_SERVICE\n        - name: PL_SEGMENT_WRITE_KEY\n          valueFrom:\n            configMapKeyRef:\n              name: segment-config\n              key: write-key\n        - name: PL_VIZIER_IMAGE_SECRET_PATH\n          value: /vizier-image-secret\n        - name: PL_VIZIER_IMAGE_SECRET_FILE\n          value: vizier_image_secret.json\n        - name: PL_ELASTIC_USERNAME\n          value: elastic\n        - name: PL_ELASTIC_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: pl-elastic-es-elastic-user\n              key: elastic\n        - name: PL_ELASTIC_CA_CERT\n          value: /elastic-certs-pub/tls.crt\n        - name: PL_WORK_DOMAIN\n          value: work.$(PL_DOMAIN_NAME)\n        - name: PL_KRATOS_BROWSER_URL\n          value: https://$(PL_WORK_DOMAIN)/oauth/kratos\n        volumeMounts:\n        - name: certs\n          mountPath: /certs\n        - name: vizier-image-secret\n          mountPath: /vizier-image-secret\n        - name: elastic-certs-pub\n          mountPath: /elastic-certs-pub\n      volumes:\n      - name: certs\n        secret:\n          secretName: service-tls-certs\n      - name: vizier-image-secret\n        secret:\n          secretName: vizier-image-secret\n          optional: true\n      - name: envoy-yaml\n        configMap:\n          name: proxy-envoy-config\n      - name: elastic-certs-pub\n        secret:\n          secretName: pl-elastic-es-http-certs-public\n",
    "policy_id": "unset-memory-requirements",
    "violation_text": "container \"api-server\" has memory limit 0"
  },
  {
    "id": "01173",
    "manifest_path": "data/manifests/the_stack_sample/sample_0312.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: mull-frontend\n  namespace: mull\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: mull-frontend\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/name: mull-frontend\n    spec:\n      containers:\n      - name: mull-frontend\n        image: ritchellegmp/mull-frontend:latest\n        imagePullPolicy: Always\n        ports:\n        - name: frontend\n          containerPort: 4200\n          protocol: TCP\n",
    "policy_id": "latest-tag",
    "violation_text": "The container \"mull-frontend\" is using an invalid container image, \"ritchellegmp/mull-frontend:latest\". Please use images that are not blocked by the `BlockList` criteria : [\".*:(latest)$\" \"^[^:]*$\" \"(.*/[^:]+)$\"]"
  },
  {
    "id": "01174",
    "manifest_path": "data/manifests/the_stack_sample/sample_0312.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: mull-frontend\n  namespace: mull\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: mull-frontend\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/name: mull-frontend\n    spec:\n      containers:\n      - name: mull-frontend\n        image: ritchellegmp/mull-frontend:latest\n        imagePullPolicy: Always\n        ports:\n        - name: frontend\n          containerPort: 4200\n          protocol: TCP\n",
    "policy_id": "no-read-only-root-fs",
    "violation_text": "container \"mull-frontend\" does not have a read-only root file system"
  },
  {
    "id": "01175",
    "manifest_path": "data/manifests/the_stack_sample/sample_0312.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: mull-frontend\n  namespace: mull\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: mull-frontend\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/name: mull-frontend\n    spec:\n      containers:\n      - name: mull-frontend\n        image: ritchellegmp/mull-frontend:latest\n        imagePullPolicy: Always\n        ports:\n        - name: frontend\n          containerPort: 4200\n          protocol: TCP\n",
    "policy_id": "run-as-non-root",
    "violation_text": "container \"mull-frontend\" is not set to runAsNonRoot"
  },
  {
    "id": "01176",
    "manifest_path": "data/manifests/the_stack_sample/sample_0312.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: mull-frontend\n  namespace: mull\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: mull-frontend\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/name: mull-frontend\n    spec:\n      containers:\n      - name: mull-frontend\n        image: ritchellegmp/mull-frontend:latest\n        imagePullPolicy: Always\n        ports:\n        - name: frontend\n          containerPort: 4200\n          protocol: TCP\n",
    "policy_id": "unset-cpu-requirements",
    "violation_text": "container \"mull-frontend\" has cpu request 0"
  },
  {
    "id": "01177",
    "manifest_path": "data/manifests/the_stack_sample/sample_0312.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: mull-frontend\n  namespace: mull\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: mull-frontend\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/name: mull-frontend\n    spec:\n      containers:\n      - name: mull-frontend\n        image: ritchellegmp/mull-frontend:latest\n        imagePullPolicy: Always\n        ports:\n        - name: frontend\n          containerPort: 4200\n          protocol: TCP\n",
    "policy_id": "unset-memory-requirements",
    "violation_text": "container \"mull-frontend\" has memory limit 0"
  },
  {
    "id": "01178",
    "manifest_path": "data/manifests/the_stack_sample/sample_0315.yaml",
    "manifest_yaml": "apiVersion: v1\nkind: ReplicationController\nmetadata:\n  labels:\n    app: replay\n  name: replay\nspec:\n  replicas: 1\n  selector:\n    app: replay\n  template:\n    metadata:\n      labels:\n        app: replay\n    spec:\n      containers:\n      - command:\n        - bash\n        - -c\n        - source /etc/kube-replay/config && node main.js\n        image: paralin/dota-replay:latest\n        imagePullPolicy: Always\n        name: replay\n        ports:\n        - containerPort: 80\n          name: web\n        - containerPort: 10304\n          name: desktop\n        volumeMounts:\n        - mountPath: /etc/kube-replay\n          name: replay-config\n          readOnly: true\n      volumes:\n      - name: replay-config\n        secret:\n          secretName: replay-config\n",
    "policy_id": "latest-tag",
    "violation_text": "The container \"replay\" is using an invalid container image, \"paralin/dota-replay:latest\". Please use images that are not blocked by the `BlockList` criteria : [\".*:(latest)$\" \"^[^:]*$\" \"(.*/[^:]+)$\"]"
  },
  {
    "id": "01179",
    "manifest_path": "data/manifests/the_stack_sample/sample_0315.yaml",
    "manifest_yaml": "apiVersion: v1\nkind: ReplicationController\nmetadata:\n  labels:\n    app: replay\n  name: replay\nspec:\n  replicas: 1\n  selector:\n    app: replay\n  template:\n    metadata:\n      labels:\n        app: replay\n    spec:\n      containers:\n      - command:\n        - bash\n        - -c\n        - source /etc/kube-replay/config && node main.js\n        image: paralin/dota-replay:latest\n        imagePullPolicy: Always\n        name: replay\n        ports:\n        - containerPort: 80\n          name: web\n        - containerPort: 10304\n          name: desktop\n        volumeMounts:\n        - mountPath: /etc/kube-replay\n          name: replay-config\n          readOnly: true\n      volumes:\n      - name: replay-config\n        secret:\n          secretName: replay-config\n",
    "policy_id": "no-read-only-root-fs",
    "violation_text": "container \"replay\" does not have a read-only root file system"
  },
  {
    "id": "01180",
    "manifest_path": "data/manifests/the_stack_sample/sample_0315.yaml",
    "manifest_yaml": "apiVersion: v1\nkind: ReplicationController\nmetadata:\n  labels:\n    app: replay\n  name: replay\nspec:\n  replicas: 1\n  selector:\n    app: replay\n  template:\n    metadata:\n      labels:\n        app: replay\n    spec:\n      containers:\n      - command:\n        - bash\n        - -c\n        - source /etc/kube-replay/config && node main.js\n        image: paralin/dota-replay:latest\n        imagePullPolicy: Always\n        name: replay\n        ports:\n        - containerPort: 80\n          name: web\n        - containerPort: 10304\n          name: desktop\n        volumeMounts:\n        - mountPath: /etc/kube-replay\n          name: replay-config\n          readOnly: true\n      volumes:\n      - name: replay-config\n        secret:\n          secretName: replay-config\n",
    "policy_id": "run-as-non-root",
    "violation_text": "container \"replay\" is not set to runAsNonRoot"
  },
  {
    "id": "01181",
    "manifest_path": "data/manifests/the_stack_sample/sample_0315.yaml",
    "manifest_yaml": "apiVersion: v1\nkind: ReplicationController\nmetadata:\n  labels:\n    app: replay\n  name: replay\nspec:\n  replicas: 1\n  selector:\n    app: replay\n  template:\n    metadata:\n      labels:\n        app: replay\n    spec:\n      containers:\n      - command:\n        - bash\n        - -c\n        - source /etc/kube-replay/config && node main.js\n        image: paralin/dota-replay:latest\n        imagePullPolicy: Always\n        name: replay\n        ports:\n        - containerPort: 80\n          name: web\n        - containerPort: 10304\n          name: desktop\n        volumeMounts:\n        - mountPath: /etc/kube-replay\n          name: replay-config\n          readOnly: true\n      volumes:\n      - name: replay-config\n        secret:\n          secretName: replay-config\n",
    "policy_id": "unset-cpu-requirements",
    "violation_text": "container \"replay\" has cpu request 0"
  },
  {
    "id": "01182",
    "manifest_path": "data/manifests/the_stack_sample/sample_0315.yaml",
    "manifest_yaml": "apiVersion: v1\nkind: ReplicationController\nmetadata:\n  labels:\n    app: replay\n  name: replay\nspec:\n  replicas: 1\n  selector:\n    app: replay\n  template:\n    metadata:\n      labels:\n        app: replay\n    spec:\n      containers:\n      - command:\n        - bash\n        - -c\n        - source /etc/kube-replay/config && node main.js\n        image: paralin/dota-replay:latest\n        imagePullPolicy: Always\n        name: replay\n        ports:\n        - containerPort: 80\n          name: web\n        - containerPort: 10304\n          name: desktop\n        volumeMounts:\n        - mountPath: /etc/kube-replay\n          name: replay-config\n          readOnly: true\n      volumes:\n      - name: replay-config\n        secret:\n          secretName: replay-config\n",
    "policy_id": "unset-memory-requirements",
    "violation_text": "container \"replay\" has memory limit 0"
  },
  {
    "id": "01183",
    "manifest_path": "data/manifests/the_stack_sample/sample_0316.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: pdns\n  namespace: default\n  labels:\n    app: pdns\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: pdns\n  template:\n    metadata:\n      labels:\n        app: pdns\n    spec:\n      volumes:\n      - name: service-account\n        secret:\n          secretName: dns-account\n          defaultMode: 256\n      serviceAccountName: pdns\n      containers:\n      - name: service\n        image: tanelmae/private-dns:latest\n        imagePullPolicy: Always\n        args:\n        - -gcp-zone=k8s-dns\n        - -gcp-reverse-zone=k8s-reverse-dns\n        - -gcp-cred=/account/dns.json\n        - -v=4\n        volumeMounts:\n        - name: service-account\n          mountPath: /account\n",
    "policy_id": "latest-tag",
    "violation_text": "The container \"service\" is using an invalid container image, \"tanelmae/private-dns:latest\". Please use images that are not blocked by the `BlockList` criteria : [\".*:(latest)$\" \"^[^:]*$\" \"(.*/[^:]+)$\"]"
  },
  {
    "id": "01184",
    "manifest_path": "data/manifests/the_stack_sample/sample_0316.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: pdns\n  namespace: default\n  labels:\n    app: pdns\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: pdns\n  template:\n    metadata:\n      labels:\n        app: pdns\n    spec:\n      volumes:\n      - name: service-account\n        secret:\n          secretName: dns-account\n          defaultMode: 256\n      serviceAccountName: pdns\n      containers:\n      - name: service\n        image: tanelmae/private-dns:latest\n        imagePullPolicy: Always\n        args:\n        - -gcp-zone=k8s-dns\n        - -gcp-reverse-zone=k8s-reverse-dns\n        - -gcp-cred=/account/dns.json\n        - -v=4\n        volumeMounts:\n        - name: service-account\n          mountPath: /account\n",
    "policy_id": "no-read-only-root-fs",
    "violation_text": "container \"service\" does not have a read-only root file system"
  },
  {
    "id": "01185",
    "manifest_path": "data/manifests/the_stack_sample/sample_0316.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: pdns\n  namespace: default\n  labels:\n    app: pdns\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: pdns\n  template:\n    metadata:\n      labels:\n        app: pdns\n    spec:\n      volumes:\n      - name: service-account\n        secret:\n          secretName: dns-account\n          defaultMode: 256\n      serviceAccountName: pdns\n      containers:\n      - name: service\n        image: tanelmae/private-dns:latest\n        imagePullPolicy: Always\n        args:\n        - -gcp-zone=k8s-dns\n        - -gcp-reverse-zone=k8s-reverse-dns\n        - -gcp-cred=/account/dns.json\n        - -v=4\n        volumeMounts:\n        - name: service-account\n          mountPath: /account\n",
    "policy_id": "run-as-non-root",
    "violation_text": "container \"service\" is not set to runAsNonRoot"
  },
  {
    "id": "01186",
    "manifest_path": "data/manifests/the_stack_sample/sample_0316.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: pdns\n  namespace: default\n  labels:\n    app: pdns\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: pdns\n  template:\n    metadata:\n      labels:\n        app: pdns\n    spec:\n      volumes:\n      - name: service-account\n        secret:\n          secretName: dns-account\n          defaultMode: 256\n      serviceAccountName: pdns\n      containers:\n      - name: service\n        image: tanelmae/private-dns:latest\n        imagePullPolicy: Always\n        args:\n        - -gcp-zone=k8s-dns\n        - -gcp-reverse-zone=k8s-reverse-dns\n        - -gcp-cred=/account/dns.json\n        - -v=4\n        volumeMounts:\n        - name: service-account\n          mountPath: /account\n",
    "policy_id": "unset-cpu-requirements",
    "violation_text": "container \"service\" has cpu request 0"
  },
  {
    "id": "01187",
    "manifest_path": "data/manifests/the_stack_sample/sample_0316.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: pdns\n  namespace: default\n  labels:\n    app: pdns\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: pdns\n  template:\n    metadata:\n      labels:\n        app: pdns\n    spec:\n      volumes:\n      - name: service-account\n        secret:\n          secretName: dns-account\n          defaultMode: 256\n      serviceAccountName: pdns\n      containers:\n      - name: service\n        image: tanelmae/private-dns:latest\n        imagePullPolicy: Always\n        args:\n        - -gcp-zone=k8s-dns\n        - -gcp-reverse-zone=k8s-reverse-dns\n        - -gcp-cred=/account/dns.json\n        - -v=4\n        volumeMounts:\n        - name: service-account\n          mountPath: /account\n",
    "policy_id": "unset-memory-requirements",
    "violation_text": "container \"service\" has memory limit 0"
  },
  {
    "id": "01188",
    "manifest_path": "data/manifests/the_stack_sample/sample_0317.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  namespace: default\n  name: needs-rebase\n  labels:\n    app: needs-rebase\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: needs-rebase\n  template:\n    metadata:\n      labels:\n        app: needs-rebase\n    spec:\n      containers:\n      - name: needs-rebase\n        image: gcr.io/k8s-prow/needs-rebase:v20220120-e267164240\n        imagePullPolicy: Always\n        args:\n        - --dry-run=false\n        - --github-endpoint=http://ghproxy\n        - --github-endpoint=https://api.github.com\n        - --github-token-path=/etc/github/oauth\n        - --update-period=6h\n        ports:\n        - name: http\n          containerPort: 8888\n        volumeMounts:\n        - name: hmac\n          mountPath: /etc/webhook\n          readOnly: true\n        - name: oauth\n          mountPath: /etc/github\n          readOnly: true\n        - name: plugins\n          mountPath: /etc/plugins\n          readOnly: true\n      volumes:\n      - name: hmac\n        secret:\n          secretName: hmac-token\n      - name: oauth\n        secret:\n          secretName: oauth-token\n      - name: plugins\n        configMap:\n          name: plugins\n",
    "policy_id": "no-read-only-root-fs",
    "violation_text": "container \"needs-rebase\" does not have a read-only root file system"
  },
  {
    "id": "01189",
    "manifest_path": "data/manifests/the_stack_sample/sample_0317.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  namespace: default\n  name: needs-rebase\n  labels:\n    app: needs-rebase\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: needs-rebase\n  template:\n    metadata:\n      labels:\n        app: needs-rebase\n    spec:\n      containers:\n      - name: needs-rebase\n        image: gcr.io/k8s-prow/needs-rebase:v20220120-e267164240\n        imagePullPolicy: Always\n        args:\n        - --dry-run=false\n        - --github-endpoint=http://ghproxy\n        - --github-endpoint=https://api.github.com\n        - --github-token-path=/etc/github/oauth\n        - --update-period=6h\n        ports:\n        - name: http\n          containerPort: 8888\n        volumeMounts:\n        - name: hmac\n          mountPath: /etc/webhook\n          readOnly: true\n        - name: oauth\n          mountPath: /etc/github\n          readOnly: true\n        - name: plugins\n          mountPath: /etc/plugins\n          readOnly: true\n      volumes:\n      - name: hmac\n        secret:\n          secretName: hmac-token\n      - name: oauth\n        secret:\n          secretName: oauth-token\n      - name: plugins\n        configMap:\n          name: plugins\n",
    "policy_id": "run-as-non-root",
    "violation_text": "container \"needs-rebase\" is not set to runAsNonRoot"
  },
  {
    "id": "01190",
    "manifest_path": "data/manifests/the_stack_sample/sample_0317.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  namespace: default\n  name: needs-rebase\n  labels:\n    app: needs-rebase\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: needs-rebase\n  template:\n    metadata:\n      labels:\n        app: needs-rebase\n    spec:\n      containers:\n      - name: needs-rebase\n        image: gcr.io/k8s-prow/needs-rebase:v20220120-e267164240\n        imagePullPolicy: Always\n        args:\n        - --dry-run=false\n        - --github-endpoint=http://ghproxy\n        - --github-endpoint=https://api.github.com\n        - --github-token-path=/etc/github/oauth\n        - --update-period=6h\n        ports:\n        - name: http\n          containerPort: 8888\n        volumeMounts:\n        - name: hmac\n          mountPath: /etc/webhook\n          readOnly: true\n        - name: oauth\n          mountPath: /etc/github\n          readOnly: true\n        - name: plugins\n          mountPath: /etc/plugins\n          readOnly: true\n      volumes:\n      - name: hmac\n        secret:\n          secretName: hmac-token\n      - name: oauth\n        secret:\n          secretName: oauth-token\n      - name: plugins\n        configMap:\n          name: plugins\n",
    "policy_id": "unset-cpu-requirements",
    "violation_text": "container \"needs-rebase\" has cpu request 0"
  },
  {
    "id": "01191",
    "manifest_path": "data/manifests/the_stack_sample/sample_0317.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  namespace: default\n  name: needs-rebase\n  labels:\n    app: needs-rebase\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: needs-rebase\n  template:\n    metadata:\n      labels:\n        app: needs-rebase\n    spec:\n      containers:\n      - name: needs-rebase\n        image: gcr.io/k8s-prow/needs-rebase:v20220120-e267164240\n        imagePullPolicy: Always\n        args:\n        - --dry-run=false\n        - --github-endpoint=http://ghproxy\n        - --github-endpoint=https://api.github.com\n        - --github-token-path=/etc/github/oauth\n        - --update-period=6h\n        ports:\n        - name: http\n          containerPort: 8888\n        volumeMounts:\n        - name: hmac\n          mountPath: /etc/webhook\n          readOnly: true\n        - name: oauth\n          mountPath: /etc/github\n          readOnly: true\n        - name: plugins\n          mountPath: /etc/plugins\n          readOnly: true\n      volumes:\n      - name: hmac\n        secret:\n          secretName: hmac-token\n      - name: oauth\n        secret:\n          secretName: oauth-token\n      - name: plugins\n        configMap:\n          name: plugins\n",
    "policy_id": "unset-memory-requirements",
    "violation_text": "container \"needs-rebase\" has memory limit 0"
  },
  {
    "id": "01192",
    "manifest_path": "data/manifests/the_stack_sample/sample_0318.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: web\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: web\n  template:\n    metadata:\n      labels:\n        app: web\n    spec:\n      containers:\n      - name: web\n        image: 3davinci/tinyweb:0.1\n        imagePullPolicy: Always\n        livenessProbe:\n          tcpSocket:\n            port: 8000\n        readinessProbe:\n          httpGet:\n            path: /index.html\n            port: 8000\n        volumeMounts:\n        - name: app\n          mountPath: /var/www/localhost/app\n      initContainers:\n      - name: init\n        image: busybox:1.31.0\n        command:\n        - sh\n        - -c\n        - wget -O- https://tinyurl.com/otus-k8s-intro | sh\n        volumeMounts:\n        - name: app\n          mountPath: /app\n      volumes:\n      - name: app\n        emptyDir: {}\n",
    "policy_id": "no-read-only-root-fs",
    "violation_text": "container \"init\" does not have a read-only root file system"
  },
  {
    "id": "01193",
    "manifest_path": "data/manifests/the_stack_sample/sample_0318.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: web\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: web\n  template:\n    metadata:\n      labels:\n        app: web\n    spec:\n      containers:\n      - name: web\n        image: 3davinci/tinyweb:0.1\n        imagePullPolicy: Always\n        livenessProbe:\n          tcpSocket:\n            port: 8000\n        readinessProbe:\n          httpGet:\n            path: /index.html\n            port: 8000\n        volumeMounts:\n        - name: app\n          mountPath: /var/www/localhost/app\n      initContainers:\n      - name: init\n        image: busybox:1.31.0\n        command:\n        - sh\n        - -c\n        - wget -O- https://tinyurl.com/otus-k8s-intro | sh\n        volumeMounts:\n        - name: app\n          mountPath: /app\n      volumes:\n      - name: app\n        emptyDir: {}\n",
    "policy_id": "no-read-only-root-fs",
    "violation_text": "container \"web\" does not have a read-only root file system"
  },
  {
    "id": "01194",
    "manifest_path": "data/manifests/the_stack_sample/sample_0318.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: web\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: web\n  template:\n    metadata:\n      labels:\n        app: web\n    spec:\n      containers:\n      - name: web\n        image: 3davinci/tinyweb:0.1\n        imagePullPolicy: Always\n        livenessProbe:\n          tcpSocket:\n            port: 8000\n        readinessProbe:\n          httpGet:\n            path: /index.html\n            port: 8000\n        volumeMounts:\n        - name: app\n          mountPath: /var/www/localhost/app\n      initContainers:\n      - name: init\n        image: busybox:1.31.0\n        command:\n        - sh\n        - -c\n        - wget -O- https://tinyurl.com/otus-k8s-intro | sh\n        volumeMounts:\n        - name: app\n          mountPath: /app\n      volumes:\n      - name: app\n        emptyDir: {}\n",
    "policy_id": "run-as-non-root",
    "violation_text": "container \"init\" is not set to runAsNonRoot"
  },
  {
    "id": "01195",
    "manifest_path": "data/manifests/the_stack_sample/sample_0318.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: web\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: web\n  template:\n    metadata:\n      labels:\n        app: web\n    spec:\n      containers:\n      - name: web\n        image: 3davinci/tinyweb:0.1\n        imagePullPolicy: Always\n        livenessProbe:\n          tcpSocket:\n            port: 8000\n        readinessProbe:\n          httpGet:\n            path: /index.html\n            port: 8000\n        volumeMounts:\n        - name: app\n          mountPath: /var/www/localhost/app\n      initContainers:\n      - name: init\n        image: busybox:1.31.0\n        command:\n        - sh\n        - -c\n        - wget -O- https://tinyurl.com/otus-k8s-intro | sh\n        volumeMounts:\n        - name: app\n          mountPath: /app\n      volumes:\n      - name: app\n        emptyDir: {}\n",
    "policy_id": "run-as-non-root",
    "violation_text": "container \"web\" is not set to runAsNonRoot"
  },
  {
    "id": "01196",
    "manifest_path": "data/manifests/the_stack_sample/sample_0318.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: web\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: web\n  template:\n    metadata:\n      labels:\n        app: web\n    spec:\n      containers:\n      - name: web\n        image: 3davinci/tinyweb:0.1\n        imagePullPolicy: Always\n        livenessProbe:\n          tcpSocket:\n            port: 8000\n        readinessProbe:\n          httpGet:\n            path: /index.html\n            port: 8000\n        volumeMounts:\n        - name: app\n          mountPath: /var/www/localhost/app\n      initContainers:\n      - name: init\n        image: busybox:1.31.0\n        command:\n        - sh\n        - -c\n        - wget -O- https://tinyurl.com/otus-k8s-intro | sh\n        volumeMounts:\n        - name: app\n          mountPath: /app\n      volumes:\n      - name: app\n        emptyDir: {}\n",
    "policy_id": "unset-cpu-requirements",
    "violation_text": "container \"init\" has cpu request 0"
  },
  {
    "id": "01197",
    "manifest_path": "data/manifests/the_stack_sample/sample_0318.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: web\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: web\n  template:\n    metadata:\n      labels:\n        app: web\n    spec:\n      containers:\n      - name: web\n        image: 3davinci/tinyweb:0.1\n        imagePullPolicy: Always\n        livenessProbe:\n          tcpSocket:\n            port: 8000\n        readinessProbe:\n          httpGet:\n            path: /index.html\n            port: 8000\n        volumeMounts:\n        - name: app\n          mountPath: /var/www/localhost/app\n      initContainers:\n      - name: init\n        image: busybox:1.31.0\n        command:\n        - sh\n        - -c\n        - wget -O- https://tinyurl.com/otus-k8s-intro | sh\n        volumeMounts:\n        - name: app\n          mountPath: /app\n      volumes:\n      - name: app\n        emptyDir: {}\n",
    "policy_id": "unset-cpu-requirements",
    "violation_text": "container \"web\" has cpu request 0"
  },
  {
    "id": "01198",
    "manifest_path": "data/manifests/the_stack_sample/sample_0318.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: web\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: web\n  template:\n    metadata:\n      labels:\n        app: web\n    spec:\n      containers:\n      - name: web\n        image: 3davinci/tinyweb:0.1\n        imagePullPolicy: Always\n        livenessProbe:\n          tcpSocket:\n            port: 8000\n        readinessProbe:\n          httpGet:\n            path: /index.html\n            port: 8000\n        volumeMounts:\n        - name: app\n          mountPath: /var/www/localhost/app\n      initContainers:\n      - name: init\n        image: busybox:1.31.0\n        command:\n        - sh\n        - -c\n        - wget -O- https://tinyurl.com/otus-k8s-intro | sh\n        volumeMounts:\n        - name: app\n          mountPath: /app\n      volumes:\n      - name: app\n        emptyDir: {}\n",
    "policy_id": "unset-memory-requirements",
    "violation_text": "container \"init\" has memory limit 0"
  },
  {
    "id": "01199",
    "manifest_path": "data/manifests/the_stack_sample/sample_0318.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: web\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: web\n  template:\n    metadata:\n      labels:\n        app: web\n    spec:\n      containers:\n      - name: web\n        image: 3davinci/tinyweb:0.1\n        imagePullPolicy: Always\n        livenessProbe:\n          tcpSocket:\n            port: 8000\n        readinessProbe:\n          httpGet:\n            path: /index.html\n            port: 8000\n        volumeMounts:\n        - name: app\n          mountPath: /var/www/localhost/app\n      initContainers:\n      - name: init\n        image: busybox:1.31.0\n        command:\n        - sh\n        - -c\n        - wget -O- https://tinyurl.com/otus-k8s-intro | sh\n        volumeMounts:\n        - name: app\n          mountPath: /app\n      volumes:\n      - name: app\n        emptyDir: {}\n",
    "policy_id": "unset-memory-requirements",
    "violation_text": "container \"web\" has memory limit 0"
  },
  {
    "id": "01200",
    "manifest_path": "data/manifests/the_stack_sample/sample_0321.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: postgres\n  labels:\n    app: postgres\n    group: db\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: postgres\n  template:\n    metadata:\n      labels:\n        app: postgres\n        type: db\n    spec:\n      volumes:\n      - name: postgres-storage\n        persistentVolumeClaim:\n          claimName: postgres-pvc\n      containers:\n      - name: postgres\n        image: postgres:9.6-alpine\n        ports:\n        - containerPort: 5432\n        envFrom:\n        - configMapRef:\n            name: postgres-config\n        volumeMounts:\n        - name: postgres-storage\n          mountPath: /var/lib/postgresql/data\n",
    "policy_id": "no-read-only-root-fs",
    "violation_text": "container \"postgres\" does not have a read-only root file system"
  }
]