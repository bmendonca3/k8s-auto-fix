[
  {
    "id": "1081",
    "manifest_path": "data/manifests/the_stack_sample/sample_0101.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: paymentservice\n  labels:\n    app: paymentservice\nspec:\n  replicas: 3\n  strategy:\n    type: RollingUpdate\n  selector:\n    matchLabels:\n      app: paymentservice\n  template:\n    metadata:\n      labels:\n        app: paymentservice\n    spec:\n      containers:\n      - name: server\n        image: opcode/hipster-payment:v.0.0.2\n        env:\n        - name: PRODUCT_CATALOG_SERVICE_ADDR\n          value: productcatalogservice:3550\n        - name: CURRENCY_SERVICE_ADDR\n          value: currencyservice:7000\n        - name: CART_SERVICE_ADDR\n          value: cartservice:7070\n        - name: RECOMMENDATION_SERVICE_ADDR\n          value: recommendationservice:8080\n        - name: CHECKOUT_SERVICE_ADDR\n          value: checkoutservice:5050\n        - name: SHIPPING_SERVICE_ADDR\n          value: shippingservice:50051\n        - name: AD_SERVICE_ADDR\n          value: adservice:9555\n",
    "policy_id": "no-anti-affinity",
    "violation_text": "object has 3 replicas but does not specify inter pod anti-affinity"
  },
  {
    "id": "1082",
    "manifest_path": "data/manifests/the_stack_sample/sample_0101.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: paymentservice\n  labels:\n    app: paymentservice\nspec:\n  replicas: 3\n  strategy:\n    type: RollingUpdate\n  selector:\n    matchLabels:\n      app: paymentservice\n  template:\n    metadata:\n      labels:\n        app: paymentservice\n    spec:\n      containers:\n      - name: server\n        image: opcode/hipster-payment:v.0.0.2\n        env:\n        - name: PRODUCT_CATALOG_SERVICE_ADDR\n          value: productcatalogservice:3550\n        - name: CURRENCY_SERVICE_ADDR\n          value: currencyservice:7000\n        - name: CART_SERVICE_ADDR\n          value: cartservice:7070\n        - name: RECOMMENDATION_SERVICE_ADDR\n          value: recommendationservice:8080\n        - name: CHECKOUT_SERVICE_ADDR\n          value: checkoutservice:5050\n        - name: SHIPPING_SERVICE_ADDR\n          value: shippingservice:50051\n        - name: AD_SERVICE_ADDR\n          value: adservice:9555\n",
    "policy_id": "no-read-only-root-fs",
    "violation_text": "container \"server\" does not have a read-only root file system"
  },
  {
    "id": "1083",
    "manifest_path": "data/manifests/the_stack_sample/sample_0101.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: paymentservice\n  labels:\n    app: paymentservice\nspec:\n  replicas: 3\n  strategy:\n    type: RollingUpdate\n  selector:\n    matchLabels:\n      app: paymentservice\n  template:\n    metadata:\n      labels:\n        app: paymentservice\n    spec:\n      containers:\n      - name: server\n        image: opcode/hipster-payment:v.0.0.2\n        env:\n        - name: PRODUCT_CATALOG_SERVICE_ADDR\n          value: productcatalogservice:3550\n        - name: CURRENCY_SERVICE_ADDR\n          value: currencyservice:7000\n        - name: CART_SERVICE_ADDR\n          value: cartservice:7070\n        - name: RECOMMENDATION_SERVICE_ADDR\n          value: recommendationservice:8080\n        - name: CHECKOUT_SERVICE_ADDR\n          value: checkoutservice:5050\n        - name: SHIPPING_SERVICE_ADDR\n          value: shippingservice:50051\n        - name: AD_SERVICE_ADDR\n          value: adservice:9555\n",
    "policy_id": "run-as-non-root",
    "violation_text": "container \"server\" is not set to runAsNonRoot"
  },
  {
    "id": "1084",
    "manifest_path": "data/manifests/the_stack_sample/sample_0101.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: paymentservice\n  labels:\n    app: paymentservice\nspec:\n  replicas: 3\n  strategy:\n    type: RollingUpdate\n  selector:\n    matchLabels:\n      app: paymentservice\n  template:\n    metadata:\n      labels:\n        app: paymentservice\n    spec:\n      containers:\n      - name: server\n        image: opcode/hipster-payment:v.0.0.2\n        env:\n        - name: PRODUCT_CATALOG_SERVICE_ADDR\n          value: productcatalogservice:3550\n        - name: CURRENCY_SERVICE_ADDR\n          value: currencyservice:7000\n        - name: CART_SERVICE_ADDR\n          value: cartservice:7070\n        - name: RECOMMENDATION_SERVICE_ADDR\n          value: recommendationservice:8080\n        - name: CHECKOUT_SERVICE_ADDR\n          value: checkoutservice:5050\n        - name: SHIPPING_SERVICE_ADDR\n          value: shippingservice:50051\n        - name: AD_SERVICE_ADDR\n          value: adservice:9555\n",
    "policy_id": "unset-cpu-requirements",
    "violation_text": "container \"server\" has cpu request 0"
  },
  {
    "id": "1085",
    "manifest_path": "data/manifests/the_stack_sample/sample_0101.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: paymentservice\n  labels:\n    app: paymentservice\nspec:\n  replicas: 3\n  strategy:\n    type: RollingUpdate\n  selector:\n    matchLabels:\n      app: paymentservice\n  template:\n    metadata:\n      labels:\n        app: paymentservice\n    spec:\n      containers:\n      - name: server\n        image: opcode/hipster-payment:v.0.0.2\n        env:\n        - name: PRODUCT_CATALOG_SERVICE_ADDR\n          value: productcatalogservice:3550\n        - name: CURRENCY_SERVICE_ADDR\n          value: currencyservice:7000\n        - name: CART_SERVICE_ADDR\n          value: cartservice:7070\n        - name: RECOMMENDATION_SERVICE_ADDR\n          value: recommendationservice:8080\n        - name: CHECKOUT_SERVICE_ADDR\n          value: checkoutservice:5050\n        - name: SHIPPING_SERVICE_ADDR\n          value: shippingservice:50051\n        - name: AD_SERVICE_ADDR\n          value: adservice:9555\n",
    "policy_id": "unset-memory-requirements",
    "violation_text": "container \"server\" has memory limit 0"
  },
  {
    "id": "1086",
    "manifest_path": "data/manifests/the_stack_sample/sample_0102.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: cowweb\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: cowweb\n  strategy:\n    type: Recreate\n  template:\n    metadata:\n      labels:\n        app: cowweb\n        version: v1.0\n    spec:\n      containers:\n      - name: cowweb\n        image: iad.ocir.io/gse00014640/handson-002/cowweb:v1.0\n        ports:\n        - name: api\n          containerPort: 8080\n        readinessProbe:\n          httpGet:\n            path: /cowsay/ping\n            port: api\n          initialDelaySeconds: 5\n          periodSeconds: 10\n        livenessProbe:\n          httpGet:\n            path: /cowsay/ping\n            port: api\n          initialDelaySeconds: 15\n          periodSeconds: 20\n        imagePullPolicy: Always\n      imagePullSecrets:\n      - name: cowweb-secret\n",
    "policy_id": "no-anti-affinity",
    "violation_text": "object has 2 replicas but does not specify inter pod anti-affinity"
  },
  {
    "id": "1087",
    "manifest_path": "data/manifests/the_stack_sample/sample_0102.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: cowweb\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: cowweb\n  strategy:\n    type: Recreate\n  template:\n    metadata:\n      labels:\n        app: cowweb\n        version: v1.0\n    spec:\n      containers:\n      - name: cowweb\n        image: iad.ocir.io/gse00014640/handson-002/cowweb:v1.0\n        ports:\n        - name: api\n          containerPort: 8080\n        readinessProbe:\n          httpGet:\n            path: /cowsay/ping\n            port: api\n          initialDelaySeconds: 5\n          periodSeconds: 10\n        livenessProbe:\n          httpGet:\n            path: /cowsay/ping\n            port: api\n          initialDelaySeconds: 15\n          periodSeconds: 20\n        imagePullPolicy: Always\n      imagePullSecrets:\n      - name: cowweb-secret\n",
    "policy_id": "no-read-only-root-fs",
    "violation_text": "container \"cowweb\" does not have a read-only root file system"
  },
  {
    "id": "1088",
    "manifest_path": "data/manifests/the_stack_sample/sample_0102.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: cowweb\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: cowweb\n  strategy:\n    type: Recreate\n  template:\n    metadata:\n      labels:\n        app: cowweb\n        version: v1.0\n    spec:\n      containers:\n      - name: cowweb\n        image: iad.ocir.io/gse00014640/handson-002/cowweb:v1.0\n        ports:\n        - name: api\n          containerPort: 8080\n        readinessProbe:\n          httpGet:\n            path: /cowsay/ping\n            port: api\n          initialDelaySeconds: 5\n          periodSeconds: 10\n        livenessProbe:\n          httpGet:\n            path: /cowsay/ping\n            port: api\n          initialDelaySeconds: 15\n          periodSeconds: 20\n        imagePullPolicy: Always\n      imagePullSecrets:\n      - name: cowweb-secret\n",
    "policy_id": "run-as-non-root",
    "violation_text": "container \"cowweb\" is not set to runAsNonRoot"
  },
  {
    "id": "1089",
    "manifest_path": "data/manifests/the_stack_sample/sample_0102.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: cowweb\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: cowweb\n  strategy:\n    type: Recreate\n  template:\n    metadata:\n      labels:\n        app: cowweb\n        version: v1.0\n    spec:\n      containers:\n      - name: cowweb\n        image: iad.ocir.io/gse00014640/handson-002/cowweb:v1.0\n        ports:\n        - name: api\n          containerPort: 8080\n        readinessProbe:\n          httpGet:\n            path: /cowsay/ping\n            port: api\n          initialDelaySeconds: 5\n          periodSeconds: 10\n        livenessProbe:\n          httpGet:\n            path: /cowsay/ping\n            port: api\n          initialDelaySeconds: 15\n          periodSeconds: 20\n        imagePullPolicy: Always\n      imagePullSecrets:\n      - name: cowweb-secret\n",
    "policy_id": "unset-cpu-requirements",
    "violation_text": "container \"cowweb\" has cpu request 0"
  },
  {
    "id": "1090",
    "manifest_path": "data/manifests/the_stack_sample/sample_0102.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: cowweb\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: cowweb\n  strategy:\n    type: Recreate\n  template:\n    metadata:\n      labels:\n        app: cowweb\n        version: v1.0\n    spec:\n      containers:\n      - name: cowweb\n        image: iad.ocir.io/gse00014640/handson-002/cowweb:v1.0\n        ports:\n        - name: api\n          containerPort: 8080\n        readinessProbe:\n          httpGet:\n            path: /cowsay/ping\n            port: api\n          initialDelaySeconds: 5\n          periodSeconds: 10\n        livenessProbe:\n          httpGet:\n            path: /cowsay/ping\n            port: api\n          initialDelaySeconds: 15\n          periodSeconds: 20\n        imagePullPolicy: Always\n      imagePullSecrets:\n      - name: cowweb-secret\n",
    "policy_id": "unset-memory-requirements",
    "violation_text": "container \"cowweb\" has memory limit 0"
  },
  {
    "id": "1091",
    "manifest_path": "data/manifests/the_stack_sample/sample_0103.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: jenkins-operator\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      name: jenkins-operator\n  template:\n    metadata:\n      labels:\n        name: jenkins-operator\n    spec:\n      serviceAccountName: jenkins-operator\n      containers:\n      - name: jenkins-operator\n        image: virtuslab/jenkins-operator:v0.0.9\n        ports:\n        - containerPort: 60000\n          name: metrics\n        command:\n        - jenkins-operator\n        args: []\n        imagePullPolicy: IfNotPresent\n        env:\n        - name: WATCH_NAMESPACE\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.namespace\n        - name: POD_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.name\n        - name: OPERATOR_NAME\n          value: jenkins-operator\n",
    "policy_id": "no-read-only-root-fs",
    "violation_text": "container \"jenkins-operator\" does not have a read-only root file system"
  },
  {
    "id": "1092",
    "manifest_path": "data/manifests/the_stack_sample/sample_0103.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: jenkins-operator\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      name: jenkins-operator\n  template:\n    metadata:\n      labels:\n        name: jenkins-operator\n    spec:\n      serviceAccountName: jenkins-operator\n      containers:\n      - name: jenkins-operator\n        image: virtuslab/jenkins-operator:v0.0.9\n        ports:\n        - containerPort: 60000\n          name: metrics\n        command:\n        - jenkins-operator\n        args: []\n        imagePullPolicy: IfNotPresent\n        env:\n        - name: WATCH_NAMESPACE\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.namespace\n        - name: POD_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.name\n        - name: OPERATOR_NAME\n          value: jenkins-operator\n",
    "policy_id": "non-existent-service-account",
    "violation_text": "serviceAccount \"jenkins-operator\" not found"
  },
  {
    "id": "1093",
    "manifest_path": "data/manifests/the_stack_sample/sample_0103.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: jenkins-operator\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      name: jenkins-operator\n  template:\n    metadata:\n      labels:\n        name: jenkins-operator\n    spec:\n      serviceAccountName: jenkins-operator\n      containers:\n      - name: jenkins-operator\n        image: virtuslab/jenkins-operator:v0.0.9\n        ports:\n        - containerPort: 60000\n          name: metrics\n        command:\n        - jenkins-operator\n        args: []\n        imagePullPolicy: IfNotPresent\n        env:\n        - name: WATCH_NAMESPACE\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.namespace\n        - name: POD_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.name\n        - name: OPERATOR_NAME\n          value: jenkins-operator\n",
    "policy_id": "run-as-non-root",
    "violation_text": "container \"jenkins-operator\" is not set to runAsNonRoot"
  },
  {
    "id": "1094",
    "manifest_path": "data/manifests/the_stack_sample/sample_0103.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: jenkins-operator\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      name: jenkins-operator\n  template:\n    metadata:\n      labels:\n        name: jenkins-operator\n    spec:\n      serviceAccountName: jenkins-operator\n      containers:\n      - name: jenkins-operator\n        image: virtuslab/jenkins-operator:v0.0.9\n        ports:\n        - containerPort: 60000\n          name: metrics\n        command:\n        - jenkins-operator\n        args: []\n        imagePullPolicy: IfNotPresent\n        env:\n        - name: WATCH_NAMESPACE\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.namespace\n        - name: POD_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.name\n        - name: OPERATOR_NAME\n          value: jenkins-operator\n",
    "policy_id": "unset-cpu-requirements",
    "violation_text": "container \"jenkins-operator\" has cpu request 0"
  },
  {
    "id": "1095",
    "manifest_path": "data/manifests/the_stack_sample/sample_0103.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: jenkins-operator\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      name: jenkins-operator\n  template:\n    metadata:\n      labels:\n        name: jenkins-operator\n    spec:\n      serviceAccountName: jenkins-operator\n      containers:\n      - name: jenkins-operator\n        image: virtuslab/jenkins-operator:v0.0.9\n        ports:\n        - containerPort: 60000\n          name: metrics\n        command:\n        - jenkins-operator\n        args: []\n        imagePullPolicy: IfNotPresent\n        env:\n        - name: WATCH_NAMESPACE\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.namespace\n        - name: POD_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.name\n        - name: OPERATOR_NAME\n          value: jenkins-operator\n",
    "policy_id": "unset-memory-requirements",
    "violation_text": "container \"jenkins-operator\" has memory limit 0"
  },
  {
    "id": "1096",
    "manifest_path": "data/manifests/the_stack_sample/sample_0104.yaml",
    "manifest_yaml": "apiVersion: v1\nkind: Pod\nmetadata:\n  name: libri-experimenter\nspec:\n  restartPolicy: Never\n  volumes:\n  - name: data\n    emptyDir: {}\n  containers:\n  - name: libri-experimenter\n    image: daedalus2718/libri-exp:snapshot-949fb64\n    args:\n    - run\n    - --librarians\n    - librarians-0.libri.default.svc.cluster.local:20100,librarians-1.libri.default.svc.cluster.local:20100,librarians-2.libri.default.svc.cluster.local:20100,librarians-3.libri.default.svc.cluster.local:20100,librarians-4.libri.default.svc.cluster.local:20100,librarians-5.libri.default.svc.cluster.local:20100,librarians-6.libri.default.svc.cluster.local:20100,librarians-7.libri.default.svc.cluster.local:20100\n    - --duration\n    - 30m\n    - --numAuthors\n    - '100'\n    - --docsPerDay\n    - '2560'\n    - --contentSizeKBGammaShape\n    - '1.5'\n    - --contentSizeKBGammaRate\n    - '0.00588'\n    - --sharesPerUpload\n    - '2'\n    - --nUploaders\n    - '64'\n    - --nDownloaders\n    - '192'\n    - --profile\n    env:\n    - name: GODEBUG\n      value: netdns=go\n    volumeMounts:\n    - name: data\n      mountPath: /data\n    resources:\n      limits:\n        memory: 2G\n        cpu: 400m\n",
    "policy_id": "no-read-only-root-fs",
    "violation_text": "container \"libri-experimenter\" does not have a read-only root file system"
  },
  {
    "id": "1097",
    "manifest_path": "data/manifests/the_stack_sample/sample_0104.yaml",
    "manifest_yaml": "apiVersion: v1\nkind: Pod\nmetadata:\n  name: libri-experimenter\nspec:\n  restartPolicy: Never\n  volumes:\n  - name: data\n    emptyDir: {}\n  containers:\n  - name: libri-experimenter\n    image: daedalus2718/libri-exp:snapshot-949fb64\n    args:\n    - run\n    - --librarians\n    - librarians-0.libri.default.svc.cluster.local:20100,librarians-1.libri.default.svc.cluster.local:20100,librarians-2.libri.default.svc.cluster.local:20100,librarians-3.libri.default.svc.cluster.local:20100,librarians-4.libri.default.svc.cluster.local:20100,librarians-5.libri.default.svc.cluster.local:20100,librarians-6.libri.default.svc.cluster.local:20100,librarians-7.libri.default.svc.cluster.local:20100\n    - --duration\n    - 30m\n    - --numAuthors\n    - '100'\n    - --docsPerDay\n    - '2560'\n    - --contentSizeKBGammaShape\n    - '1.5'\n    - --contentSizeKBGammaRate\n    - '0.00588'\n    - --sharesPerUpload\n    - '2'\n    - --nUploaders\n    - '64'\n    - --nDownloaders\n    - '192'\n    - --profile\n    env:\n    - name: GODEBUG\n      value: netdns=go\n    volumeMounts:\n    - name: data\n      mountPath: /data\n    resources:\n      limits:\n        memory: 2G\n        cpu: 400m\n",
    "policy_id": "run-as-non-root",
    "violation_text": "container \"libri-experimenter\" is not set to runAsNonRoot"
  },
  {
    "id": "1098",
    "manifest_path": "data/manifests/the_stack_sample/sample_0104.yaml",
    "manifest_yaml": "apiVersion: v1\nkind: Pod\nmetadata:\n  name: libri-experimenter\nspec:\n  restartPolicy: Never\n  volumes:\n  - name: data\n    emptyDir: {}\n  containers:\n  - name: libri-experimenter\n    image: daedalus2718/libri-exp:snapshot-949fb64\n    args:\n    - run\n    - --librarians\n    - librarians-0.libri.default.svc.cluster.local:20100,librarians-1.libri.default.svc.cluster.local:20100,librarians-2.libri.default.svc.cluster.local:20100,librarians-3.libri.default.svc.cluster.local:20100,librarians-4.libri.default.svc.cluster.local:20100,librarians-5.libri.default.svc.cluster.local:20100,librarians-6.libri.default.svc.cluster.local:20100,librarians-7.libri.default.svc.cluster.local:20100\n    - --duration\n    - 30m\n    - --numAuthors\n    - '100'\n    - --docsPerDay\n    - '2560'\n    - --contentSizeKBGammaShape\n    - '1.5'\n    - --contentSizeKBGammaRate\n    - '0.00588'\n    - --sharesPerUpload\n    - '2'\n    - --nUploaders\n    - '64'\n    - --nDownloaders\n    - '192'\n    - --profile\n    env:\n    - name: GODEBUG\n      value: netdns=go\n    volumeMounts:\n    - name: data\n      mountPath: /data\n    resources:\n      limits:\n        memory: 2G\n        cpu: 400m\n",
    "policy_id": "unset-cpu-requirements",
    "violation_text": "container \"libri-experimenter\" has cpu request 0"
  },
  {
    "id": "1099",
    "manifest_path": "data/manifests/the_stack_sample/sample_0105.yaml",
    "manifest_yaml": "apiVersion: batch/v1\nkind: Job\nmetadata:\n  name: todo-table\n  namespace: todo\n  annotations:\n    argocd.argoproj.io/sync-wave: '1'\nspec:\n  ttlSecondsAfterFinished: 100\n  template:\n    spec:\n      containers:\n      - name: postgresql-client\n        image: postgres:12\n        imagePullPolicy: Always\n        env:\n        - name: PGPASSWORD\n          value: admin\n        command:\n        - psql\n        args:\n        - --host=postgresql\n        - --username=admin\n        - --no-password\n        - --dbname=todo\n        - --command=create table Todo (id bigint not null,completed boolean not null,ordering\n          integer,title varchar(255),url varchar(255),primary key (id));create sequence\n          hibernate_sequence start with 1 increment by 1;\n      restartPolicy: Never\n  backoffLimit: 1\n",
    "policy_id": "no-read-only-root-fs",
    "violation_text": "container \"postgresql-client\" does not have a read-only root file system"
  },
  {
    "id": "1100",
    "manifest_path": "data/manifests/the_stack_sample/sample_0105.yaml",
    "manifest_yaml": "apiVersion: batch/v1\nkind: Job\nmetadata:\n  name: todo-table\n  namespace: todo\n  annotations:\n    argocd.argoproj.io/sync-wave: '1'\nspec:\n  ttlSecondsAfterFinished: 100\n  template:\n    spec:\n      containers:\n      - name: postgresql-client\n        image: postgres:12\n        imagePullPolicy: Always\n        env:\n        - name: PGPASSWORD\n          value: admin\n        command:\n        - psql\n        args:\n        - --host=postgresql\n        - --username=admin\n        - --no-password\n        - --dbname=todo\n        - --command=create table Todo (id bigint not null,completed boolean not null,ordering\n          integer,title varchar(255),url varchar(255),primary key (id));create sequence\n          hibernate_sequence start with 1 increment by 1;\n      restartPolicy: Never\n  backoffLimit: 1\n",
    "policy_id": "run-as-non-root",
    "violation_text": "container \"postgresql-client\" is not set to runAsNonRoot"
  },
  {
    "id": "1101",
    "manifest_path": "data/manifests/the_stack_sample/sample_0105.yaml",
    "manifest_yaml": "apiVersion: batch/v1\nkind: Job\nmetadata:\n  name: todo-table\n  namespace: todo\n  annotations:\n    argocd.argoproj.io/sync-wave: '1'\nspec:\n  ttlSecondsAfterFinished: 100\n  template:\n    spec:\n      containers:\n      - name: postgresql-client\n        image: postgres:12\n        imagePullPolicy: Always\n        env:\n        - name: PGPASSWORD\n          value: admin\n        command:\n        - psql\n        args:\n        - --host=postgresql\n        - --username=admin\n        - --no-password\n        - --dbname=todo\n        - --command=create table Todo (id bigint not null,completed boolean not null,ordering\n          integer,title varchar(255),url varchar(255),primary key (id));create sequence\n          hibernate_sequence start with 1 increment by 1;\n      restartPolicy: Never\n  backoffLimit: 1\n",
    "policy_id": "unset-cpu-requirements",
    "violation_text": "container \"postgresql-client\" has cpu request 0"
  },
  {
    "id": "1102",
    "manifest_path": "data/manifests/the_stack_sample/sample_0105.yaml",
    "manifest_yaml": "apiVersion: batch/v1\nkind: Job\nmetadata:\n  name: todo-table\n  namespace: todo\n  annotations:\n    argocd.argoproj.io/sync-wave: '1'\nspec:\n  ttlSecondsAfterFinished: 100\n  template:\n    spec:\n      containers:\n      - name: postgresql-client\n        image: postgres:12\n        imagePullPolicy: Always\n        env:\n        - name: PGPASSWORD\n          value: admin\n        command:\n        - psql\n        args:\n        - --host=postgresql\n        - --username=admin\n        - --no-password\n        - --dbname=todo\n        - --command=create table Todo (id bigint not null,completed boolean not null,ordering\n          integer,title varchar(255),url varchar(255),primary key (id));create sequence\n          hibernate_sequence start with 1 increment by 1;\n      restartPolicy: Never\n  backoffLimit: 1\n",
    "policy_id": "unset-memory-requirements",
    "violation_text": "container \"postgresql-client\" has memory limit 0"
  },
  {
    "id": "1103",
    "manifest_path": "data/manifests/the_stack_sample/sample_0106.yaml",
    "manifest_yaml": "apiVersion: batch/v1beta1\nkind: CronJob\nmetadata:\n  name: tf-r2.4.0-keras-api-custom-layers-v2-32\n  namespace: automated\nspec:\n  concurrencyPolicy: Forbid\n  jobTemplate:\n    spec:\n      activeDeadlineSeconds: 7200\n      backoffLimit: 1\n      template:\n        metadata:\n          annotations:\n            tf-version.cloud-tpus.google.com: 2.4.0\n        spec:\n          containers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            image: gcr.io/xl-ml-test/health-monitor:stable\n            imagePullPolicy: Always\n            name: monitor\n          - args:\n            - /bin/bash\n            - -c\n            - 'set -u\n\n              set -e\n\n              set -x\n\n\n              export PATH=$PATH:/root/google-cloud-sdk/bin\n\n              gcloud source repos clone tf2-api-tests --project=xl-ml-test\n\n              cd tf2-api-tests\n\n              pip3 install behave\n\n              behave -e ipynb_checkpoints --tags=-fails --tags=-failspod -i custom_layers_model\n\n              '\n            env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/tensorflow:r2.4.0\n            imagePullPolicy: Always\n            name: train\n            resources:\n              limits:\n                cloud-tpus.google.com/preemptible-v2: 32\n              requests:\n                cpu: 2\n                memory: 20G\n            volumeMounts:\n            - mountPath: /dev/shm\n              name: dshm\n              readOnly: false\n          initContainers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            - name: METRIC_CONFIG\n              value: \"{\\n \\\"metric_collection_config\\\": {\\n  \\\"default_aggregation_strategies\\\"\\\n                : [\\n   \\\"final\\\"\\n  ],\\n  \\\"metric_to_aggregation_strategies\\\": {\\n\\\n                \\   \\\"examples_per_second\\\": [\\n    \\\"average\\\"\\n   ]\\n  },\\n  \\\"\\\n                use_run_name_prefix\\\": true,\\n  \\\"write_to_bigquery\\\": true\\n },\\n\\\n                \\ \\\"regression_test_config\\\": {\\n  \\\"alert_for_failed_jobs\\\": true\\n\\\n                \\ },\\n \\\"test_name\\\": \\\"tf-r2.4.0-keras-api-custom-layers-v2-32\\\"\\n\\\n                }\\n\"\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/publisher:stable\n            imagePullPolicy: Always\n            name: publisher\n          nodeSelector:\n            tpu-available: 'true'\n          restartPolicy: Never\n          volumes:\n          - emptyDir:\n              medium: Memory\n            name: dshm\n  schedule: 0 10 * * *\n  successfulJobsHistoryLimit: 1\n",
    "policy_id": "no-read-only-root-fs",
    "violation_text": "container \"monitor\" does not have a read-only root file system"
  },
  {
    "id": "1104",
    "manifest_path": "data/manifests/the_stack_sample/sample_0106.yaml",
    "manifest_yaml": "apiVersion: batch/v1beta1\nkind: CronJob\nmetadata:\n  name: tf-r2.4.0-keras-api-custom-layers-v2-32\n  namespace: automated\nspec:\n  concurrencyPolicy: Forbid\n  jobTemplate:\n    spec:\n      activeDeadlineSeconds: 7200\n      backoffLimit: 1\n      template:\n        metadata:\n          annotations:\n            tf-version.cloud-tpus.google.com: 2.4.0\n        spec:\n          containers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            image: gcr.io/xl-ml-test/health-monitor:stable\n            imagePullPolicy: Always\n            name: monitor\n          - args:\n            - /bin/bash\n            - -c\n            - 'set -u\n\n              set -e\n\n              set -x\n\n\n              export PATH=$PATH:/root/google-cloud-sdk/bin\n\n              gcloud source repos clone tf2-api-tests --project=xl-ml-test\n\n              cd tf2-api-tests\n\n              pip3 install behave\n\n              behave -e ipynb_checkpoints --tags=-fails --tags=-failspod -i custom_layers_model\n\n              '\n            env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/tensorflow:r2.4.0\n            imagePullPolicy: Always\n            name: train\n            resources:\n              limits:\n                cloud-tpus.google.com/preemptible-v2: 32\n              requests:\n                cpu: 2\n                memory: 20G\n            volumeMounts:\n            - mountPath: /dev/shm\n              name: dshm\n              readOnly: false\n          initContainers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            - name: METRIC_CONFIG\n              value: \"{\\n \\\"metric_collection_config\\\": {\\n  \\\"default_aggregation_strategies\\\"\\\n                : [\\n   \\\"final\\\"\\n  ],\\n  \\\"metric_to_aggregation_strategies\\\": {\\n\\\n                \\   \\\"examples_per_second\\\": [\\n    \\\"average\\\"\\n   ]\\n  },\\n  \\\"\\\n                use_run_name_prefix\\\": true,\\n  \\\"write_to_bigquery\\\": true\\n },\\n\\\n                \\ \\\"regression_test_config\\\": {\\n  \\\"alert_for_failed_jobs\\\": true\\n\\\n                \\ },\\n \\\"test_name\\\": \\\"tf-r2.4.0-keras-api-custom-layers-v2-32\\\"\\n\\\n                }\\n\"\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/publisher:stable\n            imagePullPolicy: Always\n            name: publisher\n          nodeSelector:\n            tpu-available: 'true'\n          restartPolicy: Never\n          volumes:\n          - emptyDir:\n              medium: Memory\n            name: dshm\n  schedule: 0 10 * * *\n  successfulJobsHistoryLimit: 1\n",
    "policy_id": "no-read-only-root-fs",
    "violation_text": "container \"publisher\" does not have a read-only root file system"
  },
  {
    "id": "1105",
    "manifest_path": "data/manifests/the_stack_sample/sample_0106.yaml",
    "manifest_yaml": "apiVersion: batch/v1beta1\nkind: CronJob\nmetadata:\n  name: tf-r2.4.0-keras-api-custom-layers-v2-32\n  namespace: automated\nspec:\n  concurrencyPolicy: Forbid\n  jobTemplate:\n    spec:\n      activeDeadlineSeconds: 7200\n      backoffLimit: 1\n      template:\n        metadata:\n          annotations:\n            tf-version.cloud-tpus.google.com: 2.4.0\n        spec:\n          containers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            image: gcr.io/xl-ml-test/health-monitor:stable\n            imagePullPolicy: Always\n            name: monitor\n          - args:\n            - /bin/bash\n            - -c\n            - 'set -u\n\n              set -e\n\n              set -x\n\n\n              export PATH=$PATH:/root/google-cloud-sdk/bin\n\n              gcloud source repos clone tf2-api-tests --project=xl-ml-test\n\n              cd tf2-api-tests\n\n              pip3 install behave\n\n              behave -e ipynb_checkpoints --tags=-fails --tags=-failspod -i custom_layers_model\n\n              '\n            env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/tensorflow:r2.4.0\n            imagePullPolicy: Always\n            name: train\n            resources:\n              limits:\n                cloud-tpus.google.com/preemptible-v2: 32\n              requests:\n                cpu: 2\n                memory: 20G\n            volumeMounts:\n            - mountPath: /dev/shm\n              name: dshm\n              readOnly: false\n          initContainers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            - name: METRIC_CONFIG\n              value: \"{\\n \\\"metric_collection_config\\\": {\\n  \\\"default_aggregation_strategies\\\"\\\n                : [\\n   \\\"final\\\"\\n  ],\\n  \\\"metric_to_aggregation_strategies\\\": {\\n\\\n                \\   \\\"examples_per_second\\\": [\\n    \\\"average\\\"\\n   ]\\n  },\\n  \\\"\\\n                use_run_name_prefix\\\": true,\\n  \\\"write_to_bigquery\\\": true\\n },\\n\\\n                \\ \\\"regression_test_config\\\": {\\n  \\\"alert_for_failed_jobs\\\": true\\n\\\n                \\ },\\n \\\"test_name\\\": \\\"tf-r2.4.0-keras-api-custom-layers-v2-32\\\"\\n\\\n                }\\n\"\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/publisher:stable\n            imagePullPolicy: Always\n            name: publisher\n          nodeSelector:\n            tpu-available: 'true'\n          restartPolicy: Never\n          volumes:\n          - emptyDir:\n              medium: Memory\n            name: dshm\n  schedule: 0 10 * * *\n  successfulJobsHistoryLimit: 1\n",
    "policy_id": "no-read-only-root-fs",
    "violation_text": "container \"train\" does not have a read-only root file system"
  },
  {
    "id": "1106",
    "manifest_path": "data/manifests/the_stack_sample/sample_0106.yaml",
    "manifest_yaml": "apiVersion: batch/v1beta1\nkind: CronJob\nmetadata:\n  name: tf-r2.4.0-keras-api-custom-layers-v2-32\n  namespace: automated\nspec:\n  concurrencyPolicy: Forbid\n  jobTemplate:\n    spec:\n      activeDeadlineSeconds: 7200\n      backoffLimit: 1\n      template:\n        metadata:\n          annotations:\n            tf-version.cloud-tpus.google.com: 2.4.0\n        spec:\n          containers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            image: gcr.io/xl-ml-test/health-monitor:stable\n            imagePullPolicy: Always\n            name: monitor\n          - args:\n            - /bin/bash\n            - -c\n            - 'set -u\n\n              set -e\n\n              set -x\n\n\n              export PATH=$PATH:/root/google-cloud-sdk/bin\n\n              gcloud source repos clone tf2-api-tests --project=xl-ml-test\n\n              cd tf2-api-tests\n\n              pip3 install behave\n\n              behave -e ipynb_checkpoints --tags=-fails --tags=-failspod -i custom_layers_model\n\n              '\n            env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/tensorflow:r2.4.0\n            imagePullPolicy: Always\n            name: train\n            resources:\n              limits:\n                cloud-tpus.google.com/preemptible-v2: 32\n              requests:\n                cpu: 2\n                memory: 20G\n            volumeMounts:\n            - mountPath: /dev/shm\n              name: dshm\n              readOnly: false\n          initContainers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            - name: METRIC_CONFIG\n              value: \"{\\n \\\"metric_collection_config\\\": {\\n  \\\"default_aggregation_strategies\\\"\\\n                : [\\n   \\\"final\\\"\\n  ],\\n  \\\"metric_to_aggregation_strategies\\\": {\\n\\\n                \\   \\\"examples_per_second\\\": [\\n    \\\"average\\\"\\n   ]\\n  },\\n  \\\"\\\n                use_run_name_prefix\\\": true,\\n  \\\"write_to_bigquery\\\": true\\n },\\n\\\n                \\ \\\"regression_test_config\\\": {\\n  \\\"alert_for_failed_jobs\\\": true\\n\\\n                \\ },\\n \\\"test_name\\\": \\\"tf-r2.4.0-keras-api-custom-layers-v2-32\\\"\\n\\\n                }\\n\"\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/publisher:stable\n            imagePullPolicy: Always\n            name: publisher\n          nodeSelector:\n            tpu-available: 'true'\n          restartPolicy: Never\n          volumes:\n          - emptyDir:\n              medium: Memory\n            name: dshm\n  schedule: 0 10 * * *\n  successfulJobsHistoryLimit: 1\n",
    "policy_id": "run-as-non-root",
    "violation_text": "container \"monitor\" is not set to runAsNonRoot"
  },
  {
    "id": "1107",
    "manifest_path": "data/manifests/the_stack_sample/sample_0106.yaml",
    "manifest_yaml": "apiVersion: batch/v1beta1\nkind: CronJob\nmetadata:\n  name: tf-r2.4.0-keras-api-custom-layers-v2-32\n  namespace: automated\nspec:\n  concurrencyPolicy: Forbid\n  jobTemplate:\n    spec:\n      activeDeadlineSeconds: 7200\n      backoffLimit: 1\n      template:\n        metadata:\n          annotations:\n            tf-version.cloud-tpus.google.com: 2.4.0\n        spec:\n          containers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            image: gcr.io/xl-ml-test/health-monitor:stable\n            imagePullPolicy: Always\n            name: monitor\n          - args:\n            - /bin/bash\n            - -c\n            - 'set -u\n\n              set -e\n\n              set -x\n\n\n              export PATH=$PATH:/root/google-cloud-sdk/bin\n\n              gcloud source repos clone tf2-api-tests --project=xl-ml-test\n\n              cd tf2-api-tests\n\n              pip3 install behave\n\n              behave -e ipynb_checkpoints --tags=-fails --tags=-failspod -i custom_layers_model\n\n              '\n            env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/tensorflow:r2.4.0\n            imagePullPolicy: Always\n            name: train\n            resources:\n              limits:\n                cloud-tpus.google.com/preemptible-v2: 32\n              requests:\n                cpu: 2\n                memory: 20G\n            volumeMounts:\n            - mountPath: /dev/shm\n              name: dshm\n              readOnly: false\n          initContainers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            - name: METRIC_CONFIG\n              value: \"{\\n \\\"metric_collection_config\\\": {\\n  \\\"default_aggregation_strategies\\\"\\\n                : [\\n   \\\"final\\\"\\n  ],\\n  \\\"metric_to_aggregation_strategies\\\": {\\n\\\n                \\   \\\"examples_per_second\\\": [\\n    \\\"average\\\"\\n   ]\\n  },\\n  \\\"\\\n                use_run_name_prefix\\\": true,\\n  \\\"write_to_bigquery\\\": true\\n },\\n\\\n                \\ \\\"regression_test_config\\\": {\\n  \\\"alert_for_failed_jobs\\\": true\\n\\\n                \\ },\\n \\\"test_name\\\": \\\"tf-r2.4.0-keras-api-custom-layers-v2-32\\\"\\n\\\n                }\\n\"\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/publisher:stable\n            imagePullPolicy: Always\n            name: publisher\n          nodeSelector:\n            tpu-available: 'true'\n          restartPolicy: Never\n          volumes:\n          - emptyDir:\n              medium: Memory\n            name: dshm\n  schedule: 0 10 * * *\n  successfulJobsHistoryLimit: 1\n",
    "policy_id": "run-as-non-root",
    "violation_text": "container \"publisher\" is not set to runAsNonRoot"
  },
  {
    "id": "1108",
    "manifest_path": "data/manifests/the_stack_sample/sample_0106.yaml",
    "manifest_yaml": "apiVersion: batch/v1beta1\nkind: CronJob\nmetadata:\n  name: tf-r2.4.0-keras-api-custom-layers-v2-32\n  namespace: automated\nspec:\n  concurrencyPolicy: Forbid\n  jobTemplate:\n    spec:\n      activeDeadlineSeconds: 7200\n      backoffLimit: 1\n      template:\n        metadata:\n          annotations:\n            tf-version.cloud-tpus.google.com: 2.4.0\n        spec:\n          containers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            image: gcr.io/xl-ml-test/health-monitor:stable\n            imagePullPolicy: Always\n            name: monitor\n          - args:\n            - /bin/bash\n            - -c\n            - 'set -u\n\n              set -e\n\n              set -x\n\n\n              export PATH=$PATH:/root/google-cloud-sdk/bin\n\n              gcloud source repos clone tf2-api-tests --project=xl-ml-test\n\n              cd tf2-api-tests\n\n              pip3 install behave\n\n              behave -e ipynb_checkpoints --tags=-fails --tags=-failspod -i custom_layers_model\n\n              '\n            env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/tensorflow:r2.4.0\n            imagePullPolicy: Always\n            name: train\n            resources:\n              limits:\n                cloud-tpus.google.com/preemptible-v2: 32\n              requests:\n                cpu: 2\n                memory: 20G\n            volumeMounts:\n            - mountPath: /dev/shm\n              name: dshm\n              readOnly: false\n          initContainers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            - name: METRIC_CONFIG\n              value: \"{\\n \\\"metric_collection_config\\\": {\\n  \\\"default_aggregation_strategies\\\"\\\n                : [\\n   \\\"final\\\"\\n  ],\\n  \\\"metric_to_aggregation_strategies\\\": {\\n\\\n                \\   \\\"examples_per_second\\\": [\\n    \\\"average\\\"\\n   ]\\n  },\\n  \\\"\\\n                use_run_name_prefix\\\": true,\\n  \\\"write_to_bigquery\\\": true\\n },\\n\\\n                \\ \\\"regression_test_config\\\": {\\n  \\\"alert_for_failed_jobs\\\": true\\n\\\n                \\ },\\n \\\"test_name\\\": \\\"tf-r2.4.0-keras-api-custom-layers-v2-32\\\"\\n\\\n                }\\n\"\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/publisher:stable\n            imagePullPolicy: Always\n            name: publisher\n          nodeSelector:\n            tpu-available: 'true'\n          restartPolicy: Never\n          volumes:\n          - emptyDir:\n              medium: Memory\n            name: dshm\n  schedule: 0 10 * * *\n  successfulJobsHistoryLimit: 1\n",
    "policy_id": "run-as-non-root",
    "violation_text": "container \"train\" is not set to runAsNonRoot"
  },
  {
    "id": "1109",
    "manifest_path": "data/manifests/the_stack_sample/sample_0106.yaml",
    "manifest_yaml": "apiVersion: batch/v1beta1\nkind: CronJob\nmetadata:\n  name: tf-r2.4.0-keras-api-custom-layers-v2-32\n  namespace: automated\nspec:\n  concurrencyPolicy: Forbid\n  jobTemplate:\n    spec:\n      activeDeadlineSeconds: 7200\n      backoffLimit: 1\n      template:\n        metadata:\n          annotations:\n            tf-version.cloud-tpus.google.com: 2.4.0\n        spec:\n          containers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            image: gcr.io/xl-ml-test/health-monitor:stable\n            imagePullPolicy: Always\n            name: monitor\n          - args:\n            - /bin/bash\n            - -c\n            - 'set -u\n\n              set -e\n\n              set -x\n\n\n              export PATH=$PATH:/root/google-cloud-sdk/bin\n\n              gcloud source repos clone tf2-api-tests --project=xl-ml-test\n\n              cd tf2-api-tests\n\n              pip3 install behave\n\n              behave -e ipynb_checkpoints --tags=-fails --tags=-failspod -i custom_layers_model\n\n              '\n            env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/tensorflow:r2.4.0\n            imagePullPolicy: Always\n            name: train\n            resources:\n              limits:\n                cloud-tpus.google.com/preemptible-v2: 32\n              requests:\n                cpu: 2\n                memory: 20G\n            volumeMounts:\n            - mountPath: /dev/shm\n              name: dshm\n              readOnly: false\n          initContainers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            - name: METRIC_CONFIG\n              value: \"{\\n \\\"metric_collection_config\\\": {\\n  \\\"default_aggregation_strategies\\\"\\\n                : [\\n   \\\"final\\\"\\n  ],\\n  \\\"metric_to_aggregation_strategies\\\": {\\n\\\n                \\   \\\"examples_per_second\\\": [\\n    \\\"average\\\"\\n   ]\\n  },\\n  \\\"\\\n                use_run_name_prefix\\\": true,\\n  \\\"write_to_bigquery\\\": true\\n },\\n\\\n                \\ \\\"regression_test_config\\\": {\\n  \\\"alert_for_failed_jobs\\\": true\\n\\\n                \\ },\\n \\\"test_name\\\": \\\"tf-r2.4.0-keras-api-custom-layers-v2-32\\\"\\n\\\n                }\\n\"\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/publisher:stable\n            imagePullPolicy: Always\n            name: publisher\n          nodeSelector:\n            tpu-available: 'true'\n          restartPolicy: Never\n          volumes:\n          - emptyDir:\n              medium: Memory\n            name: dshm\n  schedule: 0 10 * * *\n  successfulJobsHistoryLimit: 1\n",
    "policy_id": "unset-cpu-requirements",
    "violation_text": "container \"monitor\" has cpu request 0"
  },
  {
    "id": "1110",
    "manifest_path": "data/manifests/the_stack_sample/sample_0106.yaml",
    "manifest_yaml": "apiVersion: batch/v1beta1\nkind: CronJob\nmetadata:\n  name: tf-r2.4.0-keras-api-custom-layers-v2-32\n  namespace: automated\nspec:\n  concurrencyPolicy: Forbid\n  jobTemplate:\n    spec:\n      activeDeadlineSeconds: 7200\n      backoffLimit: 1\n      template:\n        metadata:\n          annotations:\n            tf-version.cloud-tpus.google.com: 2.4.0\n        spec:\n          containers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            image: gcr.io/xl-ml-test/health-monitor:stable\n            imagePullPolicy: Always\n            name: monitor\n          - args:\n            - /bin/bash\n            - -c\n            - 'set -u\n\n              set -e\n\n              set -x\n\n\n              export PATH=$PATH:/root/google-cloud-sdk/bin\n\n              gcloud source repos clone tf2-api-tests --project=xl-ml-test\n\n              cd tf2-api-tests\n\n              pip3 install behave\n\n              behave -e ipynb_checkpoints --tags=-fails --tags=-failspod -i custom_layers_model\n\n              '\n            env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/tensorflow:r2.4.0\n            imagePullPolicy: Always\n            name: train\n            resources:\n              limits:\n                cloud-tpus.google.com/preemptible-v2: 32\n              requests:\n                cpu: 2\n                memory: 20G\n            volumeMounts:\n            - mountPath: /dev/shm\n              name: dshm\n              readOnly: false\n          initContainers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            - name: METRIC_CONFIG\n              value: \"{\\n \\\"metric_collection_config\\\": {\\n  \\\"default_aggregation_strategies\\\"\\\n                : [\\n   \\\"final\\\"\\n  ],\\n  \\\"metric_to_aggregation_strategies\\\": {\\n\\\n                \\   \\\"examples_per_second\\\": [\\n    \\\"average\\\"\\n   ]\\n  },\\n  \\\"\\\n                use_run_name_prefix\\\": true,\\n  \\\"write_to_bigquery\\\": true\\n },\\n\\\n                \\ \\\"regression_test_config\\\": {\\n  \\\"alert_for_failed_jobs\\\": true\\n\\\n                \\ },\\n \\\"test_name\\\": \\\"tf-r2.4.0-keras-api-custom-layers-v2-32\\\"\\n\\\n                }\\n\"\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/publisher:stable\n            imagePullPolicy: Always\n            name: publisher\n          nodeSelector:\n            tpu-available: 'true'\n          restartPolicy: Never\n          volumes:\n          - emptyDir:\n              medium: Memory\n            name: dshm\n  schedule: 0 10 * * *\n  successfulJobsHistoryLimit: 1\n",
    "policy_id": "unset-cpu-requirements",
    "violation_text": "container \"publisher\" has cpu request 0"
  },
  {
    "id": "1111",
    "manifest_path": "data/manifests/the_stack_sample/sample_0106.yaml",
    "manifest_yaml": "apiVersion: batch/v1beta1\nkind: CronJob\nmetadata:\n  name: tf-r2.4.0-keras-api-custom-layers-v2-32\n  namespace: automated\nspec:\n  concurrencyPolicy: Forbid\n  jobTemplate:\n    spec:\n      activeDeadlineSeconds: 7200\n      backoffLimit: 1\n      template:\n        metadata:\n          annotations:\n            tf-version.cloud-tpus.google.com: 2.4.0\n        spec:\n          containers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            image: gcr.io/xl-ml-test/health-monitor:stable\n            imagePullPolicy: Always\n            name: monitor\n          - args:\n            - /bin/bash\n            - -c\n            - 'set -u\n\n              set -e\n\n              set -x\n\n\n              export PATH=$PATH:/root/google-cloud-sdk/bin\n\n              gcloud source repos clone tf2-api-tests --project=xl-ml-test\n\n              cd tf2-api-tests\n\n              pip3 install behave\n\n              behave -e ipynb_checkpoints --tags=-fails --tags=-failspod -i custom_layers_model\n\n              '\n            env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/tensorflow:r2.4.0\n            imagePullPolicy: Always\n            name: train\n            resources:\n              limits:\n                cloud-tpus.google.com/preemptible-v2: 32\n              requests:\n                cpu: 2\n                memory: 20G\n            volumeMounts:\n            - mountPath: /dev/shm\n              name: dshm\n              readOnly: false\n          initContainers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            - name: METRIC_CONFIG\n              value: \"{\\n \\\"metric_collection_config\\\": {\\n  \\\"default_aggregation_strategies\\\"\\\n                : [\\n   \\\"final\\\"\\n  ],\\n  \\\"metric_to_aggregation_strategies\\\": {\\n\\\n                \\   \\\"examples_per_second\\\": [\\n    \\\"average\\\"\\n   ]\\n  },\\n  \\\"\\\n                use_run_name_prefix\\\": true,\\n  \\\"write_to_bigquery\\\": true\\n },\\n\\\n                \\ \\\"regression_test_config\\\": {\\n  \\\"alert_for_failed_jobs\\\": true\\n\\\n                \\ },\\n \\\"test_name\\\": \\\"tf-r2.4.0-keras-api-custom-layers-v2-32\\\"\\n\\\n                }\\n\"\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/publisher:stable\n            imagePullPolicy: Always\n            name: publisher\n          nodeSelector:\n            tpu-available: 'true'\n          restartPolicy: Never\n          volumes:\n          - emptyDir:\n              medium: Memory\n            name: dshm\n  schedule: 0 10 * * *\n  successfulJobsHistoryLimit: 1\n",
    "policy_id": "unset-memory-requirements",
    "violation_text": "container \"monitor\" has memory limit 0"
  },
  {
    "id": "1112",
    "manifest_path": "data/manifests/the_stack_sample/sample_0106.yaml",
    "manifest_yaml": "apiVersion: batch/v1beta1\nkind: CronJob\nmetadata:\n  name: tf-r2.4.0-keras-api-custom-layers-v2-32\n  namespace: automated\nspec:\n  concurrencyPolicy: Forbid\n  jobTemplate:\n    spec:\n      activeDeadlineSeconds: 7200\n      backoffLimit: 1\n      template:\n        metadata:\n          annotations:\n            tf-version.cloud-tpus.google.com: 2.4.0\n        spec:\n          containers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            image: gcr.io/xl-ml-test/health-monitor:stable\n            imagePullPolicy: Always\n            name: monitor\n          - args:\n            - /bin/bash\n            - -c\n            - 'set -u\n\n              set -e\n\n              set -x\n\n\n              export PATH=$PATH:/root/google-cloud-sdk/bin\n\n              gcloud source repos clone tf2-api-tests --project=xl-ml-test\n\n              cd tf2-api-tests\n\n              pip3 install behave\n\n              behave -e ipynb_checkpoints --tags=-fails --tags=-failspod -i custom_layers_model\n\n              '\n            env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/tensorflow:r2.4.0\n            imagePullPolicy: Always\n            name: train\n            resources:\n              limits:\n                cloud-tpus.google.com/preemptible-v2: 32\n              requests:\n                cpu: 2\n                memory: 20G\n            volumeMounts:\n            - mountPath: /dev/shm\n              name: dshm\n              readOnly: false\n          initContainers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            - name: METRIC_CONFIG\n              value: \"{\\n \\\"metric_collection_config\\\": {\\n  \\\"default_aggregation_strategies\\\"\\\n                : [\\n   \\\"final\\\"\\n  ],\\n  \\\"metric_to_aggregation_strategies\\\": {\\n\\\n                \\   \\\"examples_per_second\\\": [\\n    \\\"average\\\"\\n   ]\\n  },\\n  \\\"\\\n                use_run_name_prefix\\\": true,\\n  \\\"write_to_bigquery\\\": true\\n },\\n\\\n                \\ \\\"regression_test_config\\\": {\\n  \\\"alert_for_failed_jobs\\\": true\\n\\\n                \\ },\\n \\\"test_name\\\": \\\"tf-r2.4.0-keras-api-custom-layers-v2-32\\\"\\n\\\n                }\\n\"\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/publisher:stable\n            imagePullPolicy: Always\n            name: publisher\n          nodeSelector:\n            tpu-available: 'true'\n          restartPolicy: Never\n          volumes:\n          - emptyDir:\n              medium: Memory\n            name: dshm\n  schedule: 0 10 * * *\n  successfulJobsHistoryLimit: 1\n",
    "policy_id": "unset-memory-requirements",
    "violation_text": "container \"publisher\" has memory limit 0"
  },
  {
    "id": "1113",
    "manifest_path": "data/manifests/the_stack_sample/sample_0106.yaml",
    "manifest_yaml": "apiVersion: batch/v1beta1\nkind: CronJob\nmetadata:\n  name: tf-r2.4.0-keras-api-custom-layers-v2-32\n  namespace: automated\nspec:\n  concurrencyPolicy: Forbid\n  jobTemplate:\n    spec:\n      activeDeadlineSeconds: 7200\n      backoffLimit: 1\n      template:\n        metadata:\n          annotations:\n            tf-version.cloud-tpus.google.com: 2.4.0\n        spec:\n          containers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            image: gcr.io/xl-ml-test/health-monitor:stable\n            imagePullPolicy: Always\n            name: monitor\n          - args:\n            - /bin/bash\n            - -c\n            - 'set -u\n\n              set -e\n\n              set -x\n\n\n              export PATH=$PATH:/root/google-cloud-sdk/bin\n\n              gcloud source repos clone tf2-api-tests --project=xl-ml-test\n\n              cd tf2-api-tests\n\n              pip3 install behave\n\n              behave -e ipynb_checkpoints --tags=-fails --tags=-failspod -i custom_layers_model\n\n              '\n            env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/tensorflow:r2.4.0\n            imagePullPolicy: Always\n            name: train\n            resources:\n              limits:\n                cloud-tpus.google.com/preemptible-v2: 32\n              requests:\n                cpu: 2\n                memory: 20G\n            volumeMounts:\n            - mountPath: /dev/shm\n              name: dshm\n              readOnly: false\n          initContainers:\n          - env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_UID\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.uid\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n            - name: JOB_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.labels['job-name']\n            - name: MODEL_DIR\n              value: $(OUTPUT_BUCKET)/tf-r2.4.0/keras-api/custom-layers/v2-32/$(JOB_NAME)\n            - name: METRIC_CONFIG\n              value: \"{\\n \\\"metric_collection_config\\\": {\\n  \\\"default_aggregation_strategies\\\"\\\n                : [\\n   \\\"final\\\"\\n  ],\\n  \\\"metric_to_aggregation_strategies\\\": {\\n\\\n                \\   \\\"examples_per_second\\\": [\\n    \\\"average\\\"\\n   ]\\n  },\\n  \\\"\\\n                use_run_name_prefix\\\": true,\\n  \\\"write_to_bigquery\\\": true\\n },\\n\\\n                \\ \\\"regression_test_config\\\": {\\n  \\\"alert_for_failed_jobs\\\": true\\n\\\n                \\ },\\n \\\"test_name\\\": \\\"tf-r2.4.0-keras-api-custom-layers-v2-32\\\"\\n\\\n                }\\n\"\n            envFrom:\n            - configMapRef:\n                name: gcs-buckets\n            image: gcr.io/xl-ml-test/publisher:stable\n            imagePullPolicy: Always\n            name: publisher\n          nodeSelector:\n            tpu-available: 'true'\n          restartPolicy: Never\n          volumes:\n          - emptyDir:\n              medium: Memory\n            name: dshm\n  schedule: 0 10 * * *\n  successfulJobsHistoryLimit: 1\n",
    "policy_id": "unset-memory-requirements",
    "violation_text": "container \"train\" has memory limit 0"
  },
  {
    "id": "1114",
    "manifest_path": "data/manifests/the_stack_sample/sample_0107.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: skipper-demo\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      application: skipper-demo\n  template:\n    metadata:\n      labels:\n        application: skipper-demo\n    spec:\n      containers:\n      - name: skipper-demo\n        image: registry.opensource.zalan.do/teapot/skipper:v0.12.0\n        args:\n        - skipper\n        - -inline-routes\n        - '* -> inlineContent(\"<body style=''color: white; background-color: green;''><h1>Hello!</h1>\")\n          -> <shunt>'\n        ports:\n        - containerPort: 9090\n",
    "policy_id": "no-anti-affinity",
    "violation_text": "object has 2 replicas but does not specify inter pod anti-affinity"
  },
  {
    "id": "1115",
    "manifest_path": "data/manifests/the_stack_sample/sample_0107.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: skipper-demo\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      application: skipper-demo\n  template:\n    metadata:\n      labels:\n        application: skipper-demo\n    spec:\n      containers:\n      - name: skipper-demo\n        image: registry.opensource.zalan.do/teapot/skipper:v0.12.0\n        args:\n        - skipper\n        - -inline-routes\n        - '* -> inlineContent(\"<body style=''color: white; background-color: green;''><h1>Hello!</h1>\")\n          -> <shunt>'\n        ports:\n        - containerPort: 9090\n",
    "policy_id": "no-read-only-root-fs",
    "violation_text": "container \"skipper-demo\" does not have a read-only root file system"
  },
  {
    "id": "1116",
    "manifest_path": "data/manifests/the_stack_sample/sample_0107.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: skipper-demo\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      application: skipper-demo\n  template:\n    metadata:\n      labels:\n        application: skipper-demo\n    spec:\n      containers:\n      - name: skipper-demo\n        image: registry.opensource.zalan.do/teapot/skipper:v0.12.0\n        args:\n        - skipper\n        - -inline-routes\n        - '* -> inlineContent(\"<body style=''color: white; background-color: green;''><h1>Hello!</h1>\")\n          -> <shunt>'\n        ports:\n        - containerPort: 9090\n",
    "policy_id": "run-as-non-root",
    "violation_text": "container \"skipper-demo\" is not set to runAsNonRoot"
  },
  {
    "id": "1117",
    "manifest_path": "data/manifests/the_stack_sample/sample_0107.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: skipper-demo\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      application: skipper-demo\n  template:\n    metadata:\n      labels:\n        application: skipper-demo\n    spec:\n      containers:\n      - name: skipper-demo\n        image: registry.opensource.zalan.do/teapot/skipper:v0.12.0\n        args:\n        - skipper\n        - -inline-routes\n        - '* -> inlineContent(\"<body style=''color: white; background-color: green;''><h1>Hello!</h1>\")\n          -> <shunt>'\n        ports:\n        - containerPort: 9090\n",
    "policy_id": "unset-cpu-requirements",
    "violation_text": "container \"skipper-demo\" has cpu request 0"
  },
  {
    "id": "1118",
    "manifest_path": "data/manifests/the_stack_sample/sample_0107.yaml",
    "manifest_yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: skipper-demo\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      application: skipper-demo\n  template:\n    metadata:\n      labels:\n        application: skipper-demo\n    spec:\n      containers:\n      - name: skipper-demo\n        image: registry.opensource.zalan.do/teapot/skipper:v0.12.0\n        args:\n        - skipper\n        - -inline-routes\n        - '* -> inlineContent(\"<body style=''color: white; background-color: green;''><h1>Hello!</h1>\")\n          -> <shunt>'\n        ports:\n        - containerPort: 9090\n",
    "policy_id": "unset-memory-requirements",
    "violation_text": "container \"skipper-demo\" has memory limit 0"
  },
  {
    "id": "1119",
    "manifest_path": "data/manifests/the_stack_sample/sample_0108.yaml",
    "manifest_yaml": "apiVersion: v1\nkind: Service\nmetadata:\n  name: minio\n  namespace: minio\nspec:\n  ports:\n  - port: 9000\n    protocol: TCP\n    targetPort: 9000\n  selector:\n    app.kubernetes.io/name: minio\n  type: ClusterIP\n",
    "policy_id": "dangling-service",
    "violation_text": "no pods found matching service labels (map[app.kubernetes.io/name:minio])"
  },
  {
    "id": "1120",
    "manifest_path": "data/manifests/the_stack_sample/sample_0109.yaml",
    "manifest_yaml": "apiVersion: v1\nkind: Pod\nmetadata:\n  name: image-demo-8031\nspec:\n  containers:\n  - name: nginx\n    image: nginx\n",
    "policy_id": "latest-tag",
    "violation_text": "The container \"nginx\" is using an invalid container image, \"nginx\". Please use images that are not blocked by the `BlockList` criteria : [\".*:(latest)$\" \"^[^:]*$\" \"(.*/[^:]+)$\"]"
  }
]