apiVersion: v1
kind: ConfigMap
metadata:
  name: sidecar-template
  labels:
    app.kubernetes.io/component: template
data:
  data: "initContainers:\n- name: inject-scripts\n  image: pingcap/chaos-scripts:latest\n\
    \  imagePullPolicy: Always\n  command: [\"sh\", \"-c\", \"/scripts/init.sh -d\
    \ {{.DataPath}} -f {{.MountPath}}/fuse-data\"]\ncontainers:\n- name: chaosfs\n\
    \  image: pingcap/chaos-fs:latest\n  imagePullPolicy: Always\n  ports:\n  - containerPort:\
    \ 65534\n  securityContext:\n    privileged: true\n  command:\n    - /usr/local/bin/chaosfs\n\
    \    - -addr=:65534\n    - -pidfile=/tmp/fuse/pid\n    - -original={{.MountPath}}/fuse-data\n\
    \    - -mountpoint={{.DataPath}}\n  volumeMounts:\n    - name: {{.VolumeName}}\n\
    \      mountPath: {{.MountPath}}\n      mountPropagation: Bidirectional\nvolumeMounts:\n\
    - name: {{.VolumeName}}\n  mountPath: {{.MountPath}}\n  mountPropagation: HostToContainer\n\
    - name: scripts\n  mountPath: /tmp/scripts\n- name: fuse\n  mountPath: /tmp/fuse\n\
    volumes:\n- name: scripts\n  emptyDir: {}\n- name: fuse\n  emptyDir: {}\npostStart:\n\
    \  {{.ContainerName}}:\n    command:\n      - /tmp/scripts/wait-fuse.sh"
